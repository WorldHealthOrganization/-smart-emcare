{
    "resourceType": "StructureMap",
    "id": "emcare-communicationrequest-EmCareA.Registration.P",
    "meta": {
        "versionId": "3",
        "lastUpdated": "2022-04-04T14:30:53.811000+00:00"
    },
    "text": {
        "status": "generated",
        "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\"><pre>map &quot;https://fhir.dk.swisstph-mis.ch/matchbox/fhir/StructureMap/structuremap-emcare-communicationrequest-emcarea.registration.p&quot; = &quot;emcare-communicationrequest-EmCareA.Registration.P&quot;\r\n\r\n\r\nuses &quot;https://fhir.dk.swisstph-mis.ch/matchbox/fhir/Questionnaire/questionnaire-emcarea.registration.p&quot; alias 'emcarea.registration.p' as source\r\nuses &quot;https://fhir.dk.swisstph-mis.ch/matchbox/fhir/Profile/profile-emcare-communicationrequest&quot; alias 'emcare-communicationrequest' as target\r\n\r\ngroup main(source qr : 'emcarea.registration.p', target tgt : 'emcare-communicationrequest') {\r\n  qr.item as item then {\r\n    item.answer first as a where item.linkId = 'EmCare.A.DE38' then {\r\n      a -&gt; tgt.medium = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/CodeSystem/emcare-custom-codes' &quot;DE38-1&quot;;\r\n    } &quot;DE38&quot;;\r\n    item.answer first as a where item.linkId = 'EmCare.A.DE46' then {\r\n      a -&gt; tgt.recipient = a &quot;DE46-1&quot;;\r\n    } &quot;DE46&quot;;\r\n  } &quot;p-emcare-communicationrequest&quot;;\r\n}\r\n\r\n</pre></div>"
    },
    "url": "https://fhir.dk.swisstph-mis.ch/matchbox/fhir/StructureMap/structuremap-emcare-communicationrequest-emcarea.registration.p",
    "name": "emcare-communicationrequest-EmCareA.Registration.P",
    "status": "draft",
    "structure": [
        {
            "url": "https://fhir.dk.swisstph-mis.ch/matchbox/fhir/Questionnaire/questionnaire-emcarea.registration.p",
            "mode": "source",
            "alias": "'emcarea.registration.p'"
        },
        {
            "url": "https://fhir.dk.swisstph-mis.ch/matchbox/fhir/Profile/profile-emcare-communicationrequest",
            "mode": "target",
            "alias": "'emcare-communicationrequest'"
        }
    ],
    "group": [
        {
            "name": "main",
            "typeMode": "none",
            "input": [
                {
                    "name": "qr",
                    "type": "'emcarea.registration.p'",
                    "mode": "source"
                },
                {
                    "name": "tgt",
                    "type": "'emcare-communicationrequest'",
                    "mode": "target"
                }
            ],
            "rule": [
                {
                    "name": "itemsemcarea.registration.p-emcare-communicationrequest",
                    "source": [
                        {
                            "context": "qr",
                            "element": "item",
                            "variable": "item"
                        }
                    ],
                    "rule": [
                        {
                            "name": "EmCare.A.DE38",
                            "source": [
                                {
                                    "context": "item",
                                    "element": "answer",
                                    "listMode": "first",
                                    "variable": "a",
                                    "condition": "item.linkId = 'EmCare.A.DE38'"
                                }
                            ],
                            "rule": [
                                {
                                    "name": "EmCare.A.DE38-1",
                                    "source": [
                                        {
                                            "context": "a"
                                        }
                                    ],
                                    "target": [
                                        {
                                            "context": "tgt",
                                            "contextType": "variable",
                                            "element": "medium",
                                            "transform": "copy",
                                            "parameter": [
                                                {
                                                    "valueString": "https://fhir.dk.swisstph-mis.ch/matchbox/fhir/CodeSystem/emcare-custom-codes"
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "name": "EmCare.A.DE46",
                            "source": [
                                {
                                    "context": "item",
                                    "element": "answer",
                                    "listMode": "first",
                                    "variable": "a",
                                    "condition": "item.linkId = 'EmCare.A.DE46'"
                                }
                            ],
                            "rule": [
                                {
                                    "name": "EmCare.A.DE46-1",
                                    "source": [
                                        {
                                            "context": "a"
                                        }
                                    ],
                                    "target": [
                                        {
                                            "context": "tgt",
                                            "contextType": "variable",
                                            "element": "recipient",
                                            "transform": "copy",
                                            "parameter": [
                                                {
                                                    "valueId": "a"
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        }
    ]
}