{
    "resourceType": "StructureMap",
    "id": "che.b7-9.lti-dangersigns",
    "text": {
        "status": "generated",
        "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\"><pre>map &quot;https://fhir.dk.swisstph-mis.ch/matchbox/fhir/StructureMap/che.b7-9.lti-dangersigns&quot; = &quot;che.b7-9.lti-dangersigns&quot;\r\n\r\n\r\nuses &quot;http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaireresponse&quot; alias 'questionnaireResponse' as source\r\nuses &quot;http://hl7.org/fhir/StructureDefinition/Bundle&quot; alias 'Bundle' as target\r\nuses &quot;https://fhir.dk.swisstph-mis.ch/matchbox/fhir/StructureDefinition/observation&quot; alias 'Observation' as target\r\nuses &quot;https://fhir.dk.swisstph-mis.ch/matchbox/fhir/StructureDefinition/cheobservation&quot; alias 'CHE Observation' as produced\r\n\r\ngroup bundletrans(source src : questionnaireResponse, target bundle : Bundle) {\r\n  src -&gt; bundle.id = uuid() &quot;id&quot;;\r\n  src -&gt; bundle.type = 'batch' &quot;type&quot;;\r\n  src.item first as itm1 where linkId = 'LTI' then {\r\n    itm1.item first as item where (linkId = 'CHE.B7.DE01') and answer.exists() then {\r\n      src -&gt; bundle.entry as entry then {\r\n        src -&gt;  entry.request as request,  request.method = 'POST',  uuid() as uuid,  request.url = append('/Observation/', uuid) &quot;b50ac4c5&quot;;\r\n        src -&gt; entry.resource = create('Observation') as tgt then {\r\n          src -&gt; tgt then cheobservationcheb7de01(src, tgt) &quot;a737c0cf&quot;;\r\n        } &quot;7ed3dafb&quot;;\r\n      } &quot;6b07d1d0&quot;;\r\n    } &quot;642a35ec&quot;;\r\n  } &quot;07284d23&quot;;\r\n  src.item first as itm1 where linkId = 'LTI' then {\r\n    itm1.item first as item where (linkId = 'CHE.B7.DE01-tt') and answer.exists() then {\r\n      src -&gt; bundle.entry as entry then {\r\n        src -&gt;  entry.request as request,  request.method = 'POST',  uuid() as uuid,  request.url = append('/Observation/', uuid) &quot;b50ac4c5&quot;;\r\n        src -&gt; entry.resource = create('Observation') as tgt then {\r\n          src -&gt; tgt then cheobservationcheb7de01tt(src, tgt) &quot;22007021&quot;;\r\n        } &quot;2902e0da&quot;;\r\n      } &quot;323917cf&quot;;\r\n    } &quot;4334332a&quot;;\r\n  } &quot;839bb3dc&quot;;\r\n  src.item first as itm1 where linkId = 'LTI' then {\r\n    itm1.item first as item where (linkId = 'CHE.B7.DE02') and answer.exists() then {\r\n      src -&gt; bundle.entry as entry then {\r\n        src -&gt;  entry.request as request,  request.method = 'POST',  uuid() as uuid,  request.url = append('/Observation/', uuid) &quot;b50ac4c5&quot;;\r\n        src -&gt; entry.resource = create('Observation') as tgt then {\r\n          src -&gt; tgt then cheobservationcheb7de02(src, tgt) &quot;a316e259&quot;;\r\n        } &quot;8c650123&quot;;\r\n      } &quot;da4e89ff&quot;;\r\n    } &quot;8687c6e9&quot;;\r\n  } &quot;af7472fe&quot;;\r\n  src.item first as itm1 where linkId = 'LTI' then {\r\n    itm1.item first as item where (linkId = 'CHE.B7.B8.B9.DE01') and answer.exists() then {\r\n      src -&gt; bundle.entry as entry then {\r\n        src -&gt;  entry.request as request,  request.method = 'POST',  uuid() as uuid,  request.url = append('/Observation/', uuid) &quot;b50ac4c5&quot;;\r\n        src -&gt; entry.resource = create('Observation') as tgt then {\r\n          src -&gt; tgt then cheobservationcheb7b8b9de01(src, tgt) &quot;5299ff27&quot;;\r\n        } &quot;c9fd04f0&quot;;\r\n      } &quot;2db2051c&quot;;\r\n    } &quot;60dc9938&quot;;\r\n  } &quot;eaf027f6&quot;;\r\n  src.item first as itm1 where linkId = 'ds' then {\r\n    itm1.item first as item where (linkId = 'CHE.B7.DE03') and answer.exists() then {\r\n      src -&gt; bundle.entry as entry then {\r\n        src -&gt;  entry.request as request,  request.method = 'POST',  uuid() as uuid,  request.url = append('/Observation/', uuid) &quot;b50ac4c5&quot;;\r\n        src -&gt; entry.resource = create('Observation') as tgt then {\r\n          src -&gt; tgt then cheobservationcheb7de03(src, tgt) &quot;2fa6fcb2&quot;;\r\n        } &quot;2e8b07ff&quot;;\r\n      } &quot;4b26f549&quot;;\r\n    } &quot;8c2ad30a&quot;;\r\n  } &quot;7f69e1ab&quot;;\r\n  src.item first as itm1 where linkId = 'ds' then {\r\n    itm1.item first as item where (linkId = 'CHE.B7.DE04') and answer.exists() then {\r\n      src -&gt; bundle.entry as entry then {\r\n        src -&gt;  entry.request as request,  request.method = 'POST',  uuid() as uuid,  request.url = append('/Observation/', uuid) &quot;b50ac4c5&quot;;\r\n        src -&gt; entry.resource = create('Observation') as tgt then {\r\n          src -&gt; tgt then cheobservationcheb7de04(src, tgt) &quot;8c54d7aa&quot;;\r\n        } &quot;3064d931&quot;;\r\n      } &quot;7dd019b4&quot;;\r\n    } &quot;29259e14&quot;;\r\n  } &quot;c38fa949&quot;;\r\n  src.item first as itm1 where linkId = 'ds' then {\r\n    itm1.item first as item where (linkId = 'CHE.B7.DE07') and answer.exists() then {\r\n      src -&gt; bundle.entry as entry then {\r\n        src -&gt;  entry.request as request,  request.method = 'POST',  uuid() as uuid,  request.url = append('/Observation/', uuid) &quot;b50ac4c5&quot;;\r\n        src -&gt; entry.resource = create('Observation') as tgt then {\r\n          src -&gt; tgt then cheobservationcheb7de07(src, tgt) &quot;8dbaa8c1&quot;;\r\n        } &quot;96641261&quot;;\r\n      } &quot;fa37b236&quot;;\r\n    } &quot;f2f40226&quot;;\r\n  } &quot;5706ca59&quot;;\r\n  src.item first as itm1 where linkId = 'ds' then {\r\n    itm1.item first as item where (linkId = 'CHE.B7.DE08') and answer.exists() then {\r\n      src -&gt; bundle.entry as entry then {\r\n        src -&gt;  entry.request as request,  request.method = 'POST',  uuid() as uuid,  request.url = append('/Observation/', uuid) &quot;b50ac4c5&quot;;\r\n        src -&gt; entry.resource = create('Observation') as tgt then {\r\n          src -&gt; tgt then cheobservationcheb7de08(src, tgt) &quot;fc95b380&quot;;\r\n        } &quot;39e6456e&quot;;\r\n      } &quot;ff32ff5b&quot;;\r\n    } &quot;f4014d39&quot;;\r\n  } &quot;24a7a9bb&quot;;\r\n  src.item first as itm1 where linkId = 'ds' then {\r\n    itm1.item first as item where (linkId = 'CHE.B7.DE09') and answer.exists() then {\r\n      src -&gt; bundle.entry as entry then {\r\n        src -&gt;  entry.request as request,  request.method = 'POST',  uuid() as uuid,  request.url = append('/Observation/', uuid) &quot;b50ac4c5&quot;;\r\n        src -&gt; entry.resource = create('Observation') as tgt then {\r\n          src -&gt; tgt then cheobservationcheb7de09(src, tgt) &quot;dbcf420b&quot;;\r\n        } &quot;b167af1c&quot;;\r\n      } &quot;1f4cd941&quot;;\r\n    } &quot;22230b35&quot;;\r\n  } &quot;3bdc0ae6&quot;;\r\n  src.item first as itm1 where linkId = 'ds' then {\r\n    itm1.item first as item where (linkId = 'CHE.B7.DE10') and answer.exists() then {\r\n      src -&gt; bundle.entry as entry then {\r\n        src -&gt;  entry.request as request,  request.method = 'POST',  uuid() as uuid,  request.url = append('/Observation/', uuid) &quot;b50ac4c5&quot;;\r\n        src -&gt; entry.resource = create('Observation') as tgt then {\r\n          src -&gt; tgt then cheobservationcheb7de10(src, tgt) &quot;11652079&quot;;\r\n        } &quot;d5f13abf&quot;;\r\n      } &quot;5112eabc&quot;;\r\n    } &quot;40e6e7f6&quot;;\r\n  } &quot;29197ec4&quot;;\r\n}\r\n\r\ngroup cheobservationcheb7de01(source src, target tgt) {\r\n  src -&gt;  tgt.identifier = create('Identifier') as CodeID,  CodeID.system = 'http://hl7.org/fhir/namingsystem-identifier-type',  CodeID.use = 'official',  CodeID.value = 'uuid',  CodeID.id = uuid() &quot;id-cheb7de01&quot;;\r\n  src.encounter as encounter -&gt; tgt.encounter = encounter &quot;35bc6b82&quot;;\r\n  src.subject as subject -&gt;  tgt.subject = subject,  tgt.meta = create('Meta') as newMeta,  newMeta.profile = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/StructureDefinition/cheobservation',  tgt.code = create('CodeableConcept') as concept,  concept.coding = create('Coding') as coding,  coding.system = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/CodeSystem/che-custom-codes',  coding.code = 'CHE.B7.DE01' &quot;code-cheb7de01&quot;;\r\n  src.item as itemtimestamp where linkId = 'timestamp' then {\r\n    itemtimestamp.answer first as atimestamp then {\r\n      atimestamp.value as val -&gt; tgt.issued = val &quot;5af77f2c&quot;;\r\n    } &quot;7f22f29f&quot;;\r\n  } &quot;aae7a11d&quot;;\r\n  src.subject as subject -&gt; tgt.subject = subject &quot;patient&quot;;\r\n  src.item first as itm1 where linkId = 'LTI' then {\r\n    itm1.item first as item where (linkId = 'CHE.B7.DE01') and answer.exists() then {\r\n      item.answer first as a then {\r\n        a where a.value = true -&gt;  tgt.status = 'final',  tgt.value = true &quot;final-cheb7de01&quot;;\r\n        a where a.value = false -&gt;  tgt.status = 'cancelled',  tgt.value = false &quot;notfound-cheb7de01&quot;;\r\n      } &quot;bdab9370&quot;;\r\n    } &quot;31c15607&quot;;\r\n  } &quot;4e154863&quot;;\r\n}\r\n\r\ngroup cheobservationcheb7de01tt(source src, target tgt) {\r\n  src -&gt;  tgt.identifier = create('Identifier') as CodeID,  CodeID.system = 'http://hl7.org/fhir/namingsystem-identifier-type',  CodeID.use = 'official',  CodeID.value = 'uuid',  CodeID.id = uuid() &quot;id-cheb7de01tt&quot;;\r\n  src.encounter as encounter -&gt; tgt.encounter = encounter &quot;35bc6b82&quot;;\r\n  src.subject as subject -&gt;  tgt.subject = subject,  tgt.meta = create('Meta') as newMeta,  newMeta.profile = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/StructureDefinition/cheobservation',  tgt.code = create('CodeableConcept') as concept,  concept.coding = create('Coding') as coding,  coding.system = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/CodeSystem/che-custom-codes',  coding.code = 'CHE.B7.DE01-tt' &quot;code-cheb7de01tt&quot;;\r\n  src.item as itemtimestamp where linkId = 'timestamp' then {\r\n    itemtimestamp.answer first as atimestamp then {\r\n      atimestamp.value as val -&gt; tgt.issued = val &quot;5af77f2c&quot;;\r\n    } &quot;7f22f29f&quot;;\r\n  } &quot;aae7a11d&quot;;\r\n  src.subject as subject -&gt; tgt.subject = subject &quot;patient&quot;;\r\n  src.item first as itm1 where linkId = 'LTI' then {\r\n    itm1.item first as item where (linkId = 'CHE.B7.DE01-tt') and answer.exists() then {\r\n      item.answer first as a then {\r\n        a where a.value = true -&gt;  tgt.status = 'final',  tgt.value = true &quot;final-cheb7de01tt&quot;;\r\n        a where a.value = false -&gt;  tgt.status = 'cancelled',  tgt.value = false &quot;notfound-cheb7de01tt&quot;;\r\n      } &quot;bdab9370&quot;;\r\n    } &quot;015ed333&quot;;\r\n  } &quot;6029e684&quot;;\r\n}\r\n\r\ngroup cheobservationcheb7de02(source src, target tgt) {\r\n  src -&gt;  tgt.identifier = create('Identifier') as CodeID,  CodeID.system = 'http://hl7.org/fhir/namingsystem-identifier-type',  CodeID.use = 'official',  CodeID.value = 'uuid',  CodeID.id = uuid() &quot;id-cheb7de02&quot;;\r\n  src.encounter as encounter -&gt; tgt.encounter = encounter &quot;35bc6b82&quot;;\r\n  src.subject as subject -&gt;  tgt.subject = subject,  tgt.meta = create('Meta') as newMeta,  newMeta.profile = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/StructureDefinition/cheobservation',  tgt.code = create('CodeableConcept') as concept,  concept.coding = create('Coding') as coding,  coding.system = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/CodeSystem/che-custom-codes',  coding.code = 'CHE.B7.DE02' &quot;code-cheb7de02&quot;;\r\n  src.item as itemtimestamp where linkId = 'timestamp' then {\r\n    itemtimestamp.answer first as atimestamp then {\r\n      atimestamp.value as val -&gt; tgt.issued = val &quot;5af77f2c&quot;;\r\n    } &quot;7f22f29f&quot;;\r\n  } &quot;aae7a11d&quot;;\r\n  src.subject as subject -&gt; tgt.subject = subject &quot;patient&quot;;\r\n  src.item first as itm1 where linkId = 'LTI' then {\r\n    itm1.item first as item where (linkId = 'CHE.B7.DE02') and answer.exists() then {\r\n      item.answer first as a then {\r\n        a where a.value = true -&gt;  tgt.status = 'final',  tgt.value = true &quot;final-cheb7de02&quot;;\r\n        a where a.value = false -&gt;  tgt.status = 'cancelled',  tgt.value = false &quot;notfound-cheb7de02&quot;;\r\n      } &quot;bdab9370&quot;;\r\n    } &quot;5ab27008&quot;;\r\n  } &quot;2f78f394&quot;;\r\n}\r\n\r\ngroup cheobservationcheb7b8b9de01(source src, target tgt) {\r\n  src -&gt;  tgt.identifier = create('Identifier') as CodeID,  CodeID.system = 'http://hl7.org/fhir/namingsystem-identifier-type',  CodeID.use = 'official',  CodeID.value = 'uuid',  CodeID.id = uuid() &quot;id-cheb7b8b9de01&quot;;\r\n  src.encounter as encounter -&gt; tgt.encounter = encounter &quot;35bc6b82&quot;;\r\n  src.subject as subject -&gt;  tgt.subject = subject,  tgt.meta = create('Meta') as newMeta,  newMeta.profile = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/StructureDefinition/cheobservation',  tgt.code = create('CodeableConcept') as concept,  concept.coding = create('Coding') as coding,  coding.system = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/CodeSystem/che-custom-codes',  coding.code = 'CHE.B7.B8.B9.DE01' &quot;code-cheb7b8b9de01&quot;;\r\n  src.item as itemtimestamp where linkId = 'timestamp' then {\r\n    itemtimestamp.answer first as atimestamp then {\r\n      atimestamp.value as val -&gt; tgt.issued = val &quot;5af77f2c&quot;;\r\n    } &quot;7f22f29f&quot;;\r\n  } &quot;aae7a11d&quot;;\r\n  src.subject as subject -&gt; tgt.subject = subject &quot;patient&quot;;\r\n  src.item first as itm1 where linkId = 'LTI' then {\r\n    itm1.item first as item where (linkId = 'CHE.B7.B8.B9.DE01') and answer.exists() then {\r\n      item.answer first as a then {\r\n        a.value as val then {\r\n          val where val.code = 'none' -&gt; tgt.status = 'cancelled' &quot;8ab1d7a5&quot;;\r\n          val where val.code != 'none' -&gt;  tgt.value = create('CodeableConcept') as cc,  cc.coding = val,  tgt.status = 'final' &quot;a1050460&quot;;\r\n        } &quot;4ca9082e&quot;;\r\n      } &quot;7c587a4b&quot;;\r\n    } &quot;fc6944d0&quot;;\r\n  } &quot;37fe0ecf&quot;;\r\n}\r\n\r\ngroup cheobservationcheb7de03(source src, target tgt) {\r\n  src -&gt;  tgt.identifier = create('Identifier') as CodeID,  CodeID.system = 'http://hl7.org/fhir/namingsystem-identifier-type',  CodeID.use = 'official',  CodeID.value = 'uuid',  CodeID.id = uuid() &quot;id-cheb7de03&quot;;\r\n  src.encounter as encounter -&gt; tgt.encounter = encounter &quot;35bc6b82&quot;;\r\n  src.subject as subject -&gt;  tgt.subject = subject,  tgt.meta = create('Meta') as newMeta,  newMeta.profile = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/StructureDefinition/cheobservation',  tgt.code = create('CodeableConcept') as concept,  concept.coding = create('Coding') as coding,  coding.system = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/CodeSystem/che-custom-codes',  coding.code = 'CHE.B7.DE03' &quot;code-cheb7de03&quot;;\r\n  src.item as itemtimestamp where linkId = 'timestamp' then {\r\n    itemtimestamp.answer first as atimestamp then {\r\n      atimestamp.value as val -&gt; tgt.issued = val &quot;5af77f2c&quot;;\r\n    } &quot;7f22f29f&quot;;\r\n  } &quot;aae7a11d&quot;;\r\n  src.subject as subject -&gt; tgt.subject = subject &quot;patient&quot;;\r\n  src.item first as itm1 where linkId = 'ds' then {\r\n    itm1.item first as item where (linkId = 'CHE.B7.DE03') and answer.exists() then {\r\n      item.answer first as a then {\r\n        a where a.value = true -&gt;  tgt.status = 'final',  tgt.value = true &quot;final-cheb7de03&quot;;\r\n        a where a.value = false -&gt;  tgt.status = 'cancelled',  tgt.value = false &quot;notfound-cheb7de03&quot;;\r\n      } &quot;bdab9370&quot;;\r\n    } &quot;b2289b9b&quot;;\r\n  } &quot;e2cab342&quot;;\r\n}\r\n\r\ngroup cheobservationcheb7de04(source src, target tgt) {\r\n  src -&gt;  tgt.identifier = create('Identifier') as CodeID,  CodeID.system = 'http://hl7.org/fhir/namingsystem-identifier-type',  CodeID.use = 'official',  CodeID.value = 'uuid',  CodeID.id = uuid() &quot;id-cheb7de04&quot;;\r\n  src.encounter as encounter -&gt; tgt.encounter = encounter &quot;35bc6b82&quot;;\r\n  src.subject as subject -&gt;  tgt.subject = subject,  tgt.meta = create('Meta') as newMeta,  newMeta.profile = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/StructureDefinition/cheobservation',  tgt.code = create('CodeableConcept') as concept,  concept.coding = create('Coding') as coding,  coding.system = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/CodeSystem/che-custom-codes',  coding.code = 'CHE.B7.DE04' &quot;code-cheb7de04&quot;;\r\n  src.item as itemtimestamp where linkId = 'timestamp' then {\r\n    itemtimestamp.answer first as atimestamp then {\r\n      atimestamp.value as val -&gt; tgt.issued = val &quot;5af77f2c&quot;;\r\n    } &quot;7f22f29f&quot;;\r\n  } &quot;aae7a11d&quot;;\r\n  src.subject as subject -&gt; tgt.subject = subject &quot;patient&quot;;\r\n  src.item first as itm1 where linkId = 'ds' then {\r\n    itm1.item first as item where (linkId = 'CHE.B7.DE04') and answer.exists() then {\r\n      item.answer first as a then {\r\n        a.value as val then {\r\n          val where val.code = 'none' -&gt; tgt.status = 'cancelled' &quot;8ab1d7a5&quot;;\r\n          val where val.code != 'none' -&gt;  tgt.value = create('CodeableConcept') as cc,  cc.coding = val,  tgt.status = 'final' &quot;a1050460&quot;;\r\n        } &quot;4ca9082e&quot;;\r\n      } &quot;7c587a4b&quot;;\r\n    } &quot;439124b7&quot;;\r\n  } &quot;d2667a29&quot;;\r\n}\r\n\r\ngroup cheobservationcheb7de07(source src, target tgt) {\r\n  src -&gt;  tgt.identifier = create('Identifier') as CodeID,  CodeID.system = 'http://hl7.org/fhir/namingsystem-identifier-type',  CodeID.use = 'official',  CodeID.value = 'uuid',  CodeID.id = uuid() &quot;id-cheb7de07&quot;;\r\n  src.encounter as encounter -&gt; tgt.encounter = encounter &quot;35bc6b82&quot;;\r\n  src.subject as subject -&gt;  tgt.subject = subject,  tgt.meta = create('Meta') as newMeta,  newMeta.profile = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/StructureDefinition/cheobservation',  tgt.code = create('CodeableConcept') as concept,  concept.coding = create('Coding') as coding,  coding.system = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/CodeSystem/che-custom-codes',  coding.code = 'CHE.B7.DE07' &quot;code-cheb7de07&quot;;\r\n  src.item as itemtimestamp where linkId = 'timestamp' then {\r\n    itemtimestamp.answer first as atimestamp then {\r\n      atimestamp.value as val -&gt; tgt.issued = val &quot;5af77f2c&quot;;\r\n    } &quot;7f22f29f&quot;;\r\n  } &quot;aae7a11d&quot;;\r\n  src.subject as subject -&gt; tgt.subject = subject &quot;patient&quot;;\r\n  src.item first as itm1 where linkId = 'ds' then {\r\n    itm1.item first as item where (linkId = 'CHE.B7.DE07') and answer.exists() then {\r\n      item.answer first as a then {\r\n        a where a.value = true -&gt;  tgt.status = 'final',  tgt.value = true &quot;final-cheb7de07&quot;;\r\n        a where a.value = false -&gt;  tgt.status = 'cancelled',  tgt.value = false &quot;notfound-cheb7de07&quot;;\r\n      } &quot;bdab9370&quot;;\r\n    } &quot;97792e44&quot;;\r\n  } &quot;3dd9674b&quot;;\r\n}\r\n\r\ngroup cheobservationcheb7de08(source src, target tgt) {\r\n  src -&gt;  tgt.identifier = create('Identifier') as CodeID,  CodeID.system = 'http://hl7.org/fhir/namingsystem-identifier-type',  CodeID.use = 'official',  CodeID.value = 'uuid',  CodeID.id = uuid() &quot;id-cheb7de08&quot;;\r\n  src.encounter as encounter -&gt; tgt.encounter = encounter &quot;35bc6b82&quot;;\r\n  src.subject as subject -&gt;  tgt.subject = subject,  tgt.meta = create('Meta') as newMeta,  newMeta.profile = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/StructureDefinition/cheobservation',  tgt.code = create('CodeableConcept') as concept,  concept.coding = create('Coding') as coding,  coding.system = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/CodeSystem/che-custom-codes',  coding.code = 'CHE.B7.DE08' &quot;code-cheb7de08&quot;;\r\n  src.item as itemtimestamp where linkId = 'timestamp' then {\r\n    itemtimestamp.answer first as atimestamp then {\r\n      atimestamp.value as val -&gt; tgt.issued = val &quot;5af77f2c&quot;;\r\n    } &quot;7f22f29f&quot;;\r\n  } &quot;aae7a11d&quot;;\r\n  src.subject as subject -&gt; tgt.subject = subject &quot;patient&quot;;\r\n  src.item first as itm1 where linkId = 'ds' then {\r\n    itm1.item first as item where (linkId = 'CHE.B7.DE08') and answer.exists() then {\r\n      item.answer first as a then {\r\n        a where a.value = true -&gt;  tgt.status = 'final',  tgt.value = true &quot;final-cheb7de08&quot;;\r\n        a where a.value = false -&gt;  tgt.status = 'cancelled',  tgt.value = false &quot;notfound-cheb7de08&quot;;\r\n      } &quot;bdab9370&quot;;\r\n    } &quot;0c6e49a5&quot;;\r\n  } &quot;1cb8e50b&quot;;\r\n}\r\n\r\ngroup cheobservationcheb7de09(source src, target tgt) {\r\n  src -&gt;  tgt.identifier = create('Identifier') as CodeID,  CodeID.system = 'http://hl7.org/fhir/namingsystem-identifier-type',  CodeID.use = 'official',  CodeID.value = 'uuid',  CodeID.id = uuid() &quot;id-cheb7de09&quot;;\r\n  src.encounter as encounter -&gt; tgt.encounter = encounter &quot;35bc6b82&quot;;\r\n  src.subject as subject -&gt;  tgt.subject = subject,  tgt.meta = create('Meta') as newMeta,  newMeta.profile = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/StructureDefinition/cheobservation',  tgt.code = create('CodeableConcept') as concept,  concept.coding = create('Coding') as coding,  coding.system = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/CodeSystem/che-custom-codes',  coding.code = 'CHE.B7.DE09' &quot;code-cheb7de09&quot;;\r\n  src.item as itemtimestamp where linkId = 'timestamp' then {\r\n    itemtimestamp.answer first as atimestamp then {\r\n      atimestamp.value as val -&gt; tgt.issued = val &quot;5af77f2c&quot;;\r\n    } &quot;7f22f29f&quot;;\r\n  } &quot;aae7a11d&quot;;\r\n  src.subject as subject -&gt; tgt.subject = subject &quot;patient&quot;;\r\n  src.item first as itm1 where linkId = 'ds' then {\r\n    itm1.item first as item where (linkId = 'CHE.B7.DE09') and answer.exists() then {\r\n      item.answer first as a then {\r\n        a where a.value = true -&gt;  tgt.status = 'final',  tgt.value = true &quot;final-cheb7de09&quot;;\r\n        a where a.value = false -&gt;  tgt.status = 'cancelled',  tgt.value = false &quot;notfound-cheb7de09&quot;;\r\n      } &quot;bdab9370&quot;;\r\n    } &quot;95ee9897&quot;;\r\n  } &quot;50c338e5&quot;;\r\n}\r\n\r\ngroup cheobservationcheb7de10(source src, target tgt) {\r\n  src -&gt;  tgt.identifier = create('Identifier') as CodeID,  CodeID.system = 'http://hl7.org/fhir/namingsystem-identifier-type',  CodeID.use = 'official',  CodeID.value = 'uuid',  CodeID.id = uuid() &quot;id-cheb7de10&quot;;\r\n  src.encounter as encounter -&gt; tgt.encounter = encounter &quot;35bc6b82&quot;;\r\n  src.subject as subject -&gt;  tgt.subject = subject,  tgt.meta = create('Meta') as newMeta,  newMeta.profile = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/StructureDefinition/cheobservation',  tgt.code = create('CodeableConcept') as concept,  concept.coding = create('Coding') as coding,  coding.system = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/CodeSystem/che-custom-codes',  coding.code = 'CHE.B7.DE10' &quot;code-cheb7de10&quot;;\r\n  src.item as itemtimestamp where linkId = 'timestamp' then {\r\n    itemtimestamp.answer first as atimestamp then {\r\n      atimestamp.value as val -&gt; tgt.issued = val &quot;5af77f2c&quot;;\r\n    } &quot;7f22f29f&quot;;\r\n  } &quot;aae7a11d&quot;;\r\n  src.subject as subject -&gt; tgt.subject = subject &quot;patient&quot;;\r\n  src.item first as itm1 where linkId = 'ds' then {\r\n    itm1.item first as item where (linkId = 'CHE.B7.DE10') and answer.exists() then {\r\n      item.answer first as a then {\r\n        a.value as val then {\r\n          val where val.code = 'none' -&gt; tgt.status = 'cancelled' &quot;8ab1d7a5&quot;;\r\n          val where val.code != 'none' -&gt;  tgt.value = create('CodeableConcept') as cc,  cc.coding = val,  tgt.status = 'final' &quot;a1050460&quot;;\r\n        } &quot;4ca9082e&quot;;\r\n      } &quot;7c587a4b&quot;;\r\n    } &quot;88b2075a&quot;;\r\n  } &quot;ad934662&quot;;\r\n}\r\n\r\n</pre></div>"
    },
    "url": "https://fhir.dk.swisstph-mis.ch/matchbox/fhir/StructureMap/che.b7-9.lti-dangersigns",
    "name": "che.b7-9.lti-dangersigns",
    "status": "active",
    "structure": [
        {
            "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaireresponse",
            "mode": "source",
            "alias": "'questionnaireResponse'"
        },
        {
            "url": "http://hl7.org/fhir/StructureDefinition/Bundle",
            "mode": "target",
            "alias": "'Bundle'"
        },
        {
            "url": "https://fhir.dk.swisstph-mis.ch/matchbox/fhir/StructureDefinition/observation",
            "mode": "target",
            "alias": "'Observation'"
        },
        {
            "url": "https://fhir.dk.swisstph-mis.ch/matchbox/fhir/StructureDefinition/cheobservation",
            "mode": "produced",
            "alias": "'CHE Observation'"
        }
    ],
    "group": [
        {
            "name": "bundletrans",
            "typeMode": "none",
            "input": [
                {
                    "name": "src",
                    "type": "questionnaireResponse",
                    "mode": "source"
                },
                {
                    "name": "bundle",
                    "type": "Bundle",
                    "mode": "target"
                }
            ],
            "rule": [
                {
                    "name": "id",
                    "source": [
                        {
                            "context": "src"
                        }
                    ],
                    "target": [
                        {
                            "context": "bundle",
                            "contextType": "variable",
                            "element": "id",
                            "transform": "uuid"
                        }
                    ]
                },
                {
                    "name": "type",
                    "source": [
                        {
                            "context": "src"
                        }
                    ],
                    "target": [
                        {
                            "context": "bundle",
                            "contextType": "variable",
                            "element": "type",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "batch"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "07284d23",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "listMode": "first",
                            "variable": "itm1",
                            "condition": "linkId = 'LTI'"
                        }
                    ],
                    "rule": [
                        {
                            "name": "642a35ec",
                            "source": [
                                {
                                    "context": "itm1",
                                    "element": "item",
                                    "listMode": "first",
                                    "variable": "item",
                                    "condition": "(linkId = 'CHE.B7.DE01') and answer.exists()"
                                }
                            ],
                            "rule": [
                                {
                                    "name": "6b07d1d0",
                                    "source": [
                                        {
                                            "context": "src"
                                        }
                                    ],
                                    "target": [
                                        {
                                            "context": "bundle",
                                            "contextType": "variable",
                                            "element": "entry",
                                            "variable": "entry"
                                        }
                                    ],
                                    "rule": [
                                        {
                                            "name": "b50ac4c5",
                                            "source": [
                                                {
                                                    "context": "src"
                                                }
                                            ],
                                            "target": [
                                                {
                                                    "context": "entry",
                                                    "contextType": "variable",
                                                    "element": "request",
                                                    "variable": "request"
                                                },
                                                {
                                                    "context": "request",
                                                    "contextType": "variable",
                                                    "element": "method",
                                                    "transform": "copy",
                                                    "parameter": [
                                                        {
                                                            "valueString": "POST"
                                                        }
                                                    ]
                                                },
                                                {
                                                    "contextType": "variable",
                                                    "variable": "uuid",
                                                    "transform": "uuid"
                                                },
                                                {
                                                    "context": "request",
                                                    "contextType": "variable",
                                                    "element": "url",
                                                    "transform": "append",
                                                    "parameter": [
                                                        {
                                                            "valueString": "/Observation/"
                                                        },
                                                        {
                                                            "valueId": "uuid"
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "name": "7ed3dafb",
                                            "source": [
                                                {
                                                    "context": "src"
                                                }
                                            ],
                                            "target": [
                                                {
                                                    "context": "entry",
                                                    "contextType": "variable",
                                                    "element": "resource",
                                                    "variable": "tgt",
                                                    "transform": "create",
                                                    "parameter": [
                                                        {
                                                            "valueString": "Observation"
                                                        }
                                                    ]
                                                }
                                            ],
                                            "rule": [
                                                {
                                                    "name": "a737c0cf",
                                                    "source": [
                                                        {
                                                            "context": "src"
                                                        }
                                                    ],
                                                    "target": [
                                                        {
                                                            "contextType": "variable",
                                                            "transform": "copy",
                                                            "parameter": [
                                                                {
                                                                    "valueId": "tgt"
                                                                }
                                                            ]
                                                        }
                                                    ],
                                                    "dependent": [
                                                        {
                                                            "name": "cheobservationcheb7de01",
                                                            "variable": [
                                                                "src",
                                                                "tgt"
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "839bb3dc",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "listMode": "first",
                            "variable": "itm1",
                            "condition": "linkId = 'LTI'"
                        }
                    ],
                    "rule": [
                        {
                            "name": "4334332a",
                            "source": [
                                {
                                    "context": "itm1",
                                    "element": "item",
                                    "listMode": "first",
                                    "variable": "item",
                                    "condition": "(linkId = 'CHE.B7.DE01-tt') and answer.exists()"
                                }
                            ],
                            "rule": [
                                {
                                    "name": "323917cf",
                                    "source": [
                                        {
                                            "context": "src"
                                        }
                                    ],
                                    "target": [
                                        {
                                            "context": "bundle",
                                            "contextType": "variable",
                                            "element": "entry",
                                            "variable": "entry"
                                        }
                                    ],
                                    "rule": [
                                        {
                                            "name": "b50ac4c5",
                                            "source": [
                                                {
                                                    "context": "src"
                                                }
                                            ],
                                            "target": [
                                                {
                                                    "context": "entry",
                                                    "contextType": "variable",
                                                    "element": "request",
                                                    "variable": "request"
                                                },
                                                {
                                                    "context": "request",
                                                    "contextType": "variable",
                                                    "element": "method",
                                                    "transform": "copy",
                                                    "parameter": [
                                                        {
                                                            "valueString": "POST"
                                                        }
                                                    ]
                                                },
                                                {
                                                    "contextType": "variable",
                                                    "variable": "uuid",
                                                    "transform": "uuid"
                                                },
                                                {
                                                    "context": "request",
                                                    "contextType": "variable",
                                                    "element": "url",
                                                    "transform": "append",
                                                    "parameter": [
                                                        {
                                                            "valueString": "/Observation/"
                                                        },
                                                        {
                                                            "valueId": "uuid"
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "name": "2902e0da",
                                            "source": [
                                                {
                                                    "context": "src"
                                                }
                                            ],
                                            "target": [
                                                {
                                                    "context": "entry",
                                                    "contextType": "variable",
                                                    "element": "resource",
                                                    "variable": "tgt",
                                                    "transform": "create",
                                                    "parameter": [
                                                        {
                                                            "valueString": "Observation"
                                                        }
                                                    ]
                                                }
                                            ],
                                            "rule": [
                                                {
                                                    "name": "22007021",
                                                    "source": [
                                                        {
                                                            "context": "src"
                                                        }
                                                    ],
                                                    "target": [
                                                        {
                                                            "contextType": "variable",
                                                            "transform": "copy",
                                                            "parameter": [
                                                                {
                                                                    "valueId": "tgt"
                                                                }
                                                            ]
                                                        }
                                                    ],
                                                    "dependent": [
                                                        {
                                                            "name": "cheobservationcheb7de01tt",
                                                            "variable": [
                                                                "src",
                                                                "tgt"
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "af7472fe",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "listMode": "first",
                            "variable": "itm1",
                            "condition": "linkId = 'LTI'"
                        }
                    ],
                    "rule": [
                        {
                            "name": "8687c6e9",
                            "source": [
                                {
                                    "context": "itm1",
                                    "element": "item",
                                    "listMode": "first",
                                    "variable": "item",
                                    "condition": "(linkId = 'CHE.B7.DE02') and answer.exists()"
                                }
                            ],
                            "rule": [
                                {
                                    "name": "da4e89ff",
                                    "source": [
                                        {
                                            "context": "src"
                                        }
                                    ],
                                    "target": [
                                        {
                                            "context": "bundle",
                                            "contextType": "variable",
                                            "element": "entry",
                                            "variable": "entry"
                                        }
                                    ],
                                    "rule": [
                                        {
                                            "name": "b50ac4c5",
                                            "source": [
                                                {
                                                    "context": "src"
                                                }
                                            ],
                                            "target": [
                                                {
                                                    "context": "entry",
                                                    "contextType": "variable",
                                                    "element": "request",
                                                    "variable": "request"
                                                },
                                                {
                                                    "context": "request",
                                                    "contextType": "variable",
                                                    "element": "method",
                                                    "transform": "copy",
                                                    "parameter": [
                                                        {
                                                            "valueString": "POST"
                                                        }
                                                    ]
                                                },
                                                {
                                                    "contextType": "variable",
                                                    "variable": "uuid",
                                                    "transform": "uuid"
                                                },
                                                {
                                                    "context": "request",
                                                    "contextType": "variable",
                                                    "element": "url",
                                                    "transform": "append",
                                                    "parameter": [
                                                        {
                                                            "valueString": "/Observation/"
                                                        },
                                                        {
                                                            "valueId": "uuid"
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "name": "8c650123",
                                            "source": [
                                                {
                                                    "context": "src"
                                                }
                                            ],
                                            "target": [
                                                {
                                                    "context": "entry",
                                                    "contextType": "variable",
                                                    "element": "resource",
                                                    "variable": "tgt",
                                                    "transform": "create",
                                                    "parameter": [
                                                        {
                                                            "valueString": "Observation"
                                                        }
                                                    ]
                                                }
                                            ],
                                            "rule": [
                                                {
                                                    "name": "a316e259",
                                                    "source": [
                                                        {
                                                            "context": "src"
                                                        }
                                                    ],
                                                    "target": [
                                                        {
                                                            "contextType": "variable",
                                                            "transform": "copy",
                                                            "parameter": [
                                                                {
                                                                    "valueId": "tgt"
                                                                }
                                                            ]
                                                        }
                                                    ],
                                                    "dependent": [
                                                        {
                                                            "name": "cheobservationcheb7de02",
                                                            "variable": [
                                                                "src",
                                                                "tgt"
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "eaf027f6",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "listMode": "first",
                            "variable": "itm1",
                            "condition": "linkId = 'LTI'"
                        }
                    ],
                    "rule": [
                        {
                            "name": "60dc9938",
                            "source": [
                                {
                                    "context": "itm1",
                                    "element": "item",
                                    "listMode": "first",
                                    "variable": "item",
                                    "condition": "(linkId = 'CHE.B7.B8.B9.DE01') and answer.exists()"
                                }
                            ],
                            "rule": [
                                {
                                    "name": "2db2051c",
                                    "source": [
                                        {
                                            "context": "src"
                                        }
                                    ],
                                    "target": [
                                        {
                                            "context": "bundle",
                                            "contextType": "variable",
                                            "element": "entry",
                                            "variable": "entry"
                                        }
                                    ],
                                    "rule": [
                                        {
                                            "name": "b50ac4c5",
                                            "source": [
                                                {
                                                    "context": "src"
                                                }
                                            ],
                                            "target": [
                                                {
                                                    "context": "entry",
                                                    "contextType": "variable",
                                                    "element": "request",
                                                    "variable": "request"
                                                },
                                                {
                                                    "context": "request",
                                                    "contextType": "variable",
                                                    "element": "method",
                                                    "transform": "copy",
                                                    "parameter": [
                                                        {
                                                            "valueString": "POST"
                                                        }
                                                    ]
                                                },
                                                {
                                                    "contextType": "variable",
                                                    "variable": "uuid",
                                                    "transform": "uuid"
                                                },
                                                {
                                                    "context": "request",
                                                    "contextType": "variable",
                                                    "element": "url",
                                                    "transform": "append",
                                                    "parameter": [
                                                        {
                                                            "valueString": "/Observation/"
                                                        },
                                                        {
                                                            "valueId": "uuid"
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "name": "c9fd04f0",
                                            "source": [
                                                {
                                                    "context": "src"
                                                }
                                            ],
                                            "target": [
                                                {
                                                    "context": "entry",
                                                    "contextType": "variable",
                                                    "element": "resource",
                                                    "variable": "tgt",
                                                    "transform": "create",
                                                    "parameter": [
                                                        {
                                                            "valueString": "Observation"
                                                        }
                                                    ]
                                                }
                                            ],
                                            "rule": [
                                                {
                                                    "name": "5299ff27",
                                                    "source": [
                                                        {
                                                            "context": "src"
                                                        }
                                                    ],
                                                    "target": [
                                                        {
                                                            "contextType": "variable",
                                                            "transform": "copy",
                                                            "parameter": [
                                                                {
                                                                    "valueId": "tgt"
                                                                }
                                                            ]
                                                        }
                                                    ],
                                                    "dependent": [
                                                        {
                                                            "name": "cheobservationcheb7b8b9de01",
                                                            "variable": [
                                                                "src",
                                                                "tgt"
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "7f69e1ab",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "listMode": "first",
                            "variable": "itm1",
                            "condition": "linkId = 'ds'"
                        }
                    ],
                    "rule": [
                        {
                            "name": "8c2ad30a",
                            "source": [
                                {
                                    "context": "itm1",
                                    "element": "item",
                                    "listMode": "first",
                                    "variable": "item",
                                    "condition": "(linkId = 'CHE.B7.DE03') and answer.exists()"
                                }
                            ],
                            "rule": [
                                {
                                    "name": "4b26f549",
                                    "source": [
                                        {
                                            "context": "src"
                                        }
                                    ],
                                    "target": [
                                        {
                                            "context": "bundle",
                                            "contextType": "variable",
                                            "element": "entry",
                                            "variable": "entry"
                                        }
                                    ],
                                    "rule": [
                                        {
                                            "name": "b50ac4c5",
                                            "source": [
                                                {
                                                    "context": "src"
                                                }
                                            ],
                                            "target": [
                                                {
                                                    "context": "entry",
                                                    "contextType": "variable",
                                                    "element": "request",
                                                    "variable": "request"
                                                },
                                                {
                                                    "context": "request",
                                                    "contextType": "variable",
                                                    "element": "method",
                                                    "transform": "copy",
                                                    "parameter": [
                                                        {
                                                            "valueString": "POST"
                                                        }
                                                    ]
                                                },
                                                {
                                                    "contextType": "variable",
                                                    "variable": "uuid",
                                                    "transform": "uuid"
                                                },
                                                {
                                                    "context": "request",
                                                    "contextType": "variable",
                                                    "element": "url",
                                                    "transform": "append",
                                                    "parameter": [
                                                        {
                                                            "valueString": "/Observation/"
                                                        },
                                                        {
                                                            "valueId": "uuid"
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "name": "2e8b07ff",
                                            "source": [
                                                {
                                                    "context": "src"
                                                }
                                            ],
                                            "target": [
                                                {
                                                    "context": "entry",
                                                    "contextType": "variable",
                                                    "element": "resource",
                                                    "variable": "tgt",
                                                    "transform": "create",
                                                    "parameter": [
                                                        {
                                                            "valueString": "Observation"
                                                        }
                                                    ]
                                                }
                                            ],
                                            "rule": [
                                                {
                                                    "name": "2fa6fcb2",
                                                    "source": [
                                                        {
                                                            "context": "src"
                                                        }
                                                    ],
                                                    "target": [
                                                        {
                                                            "contextType": "variable",
                                                            "transform": "copy",
                                                            "parameter": [
                                                                {
                                                                    "valueId": "tgt"
                                                                }
                                                            ]
                                                        }
                                                    ],
                                                    "dependent": [
                                                        {
                                                            "name": "cheobservationcheb7de03",
                                                            "variable": [
                                                                "src",
                                                                "tgt"
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "c38fa949",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "listMode": "first",
                            "variable": "itm1",
                            "condition": "linkId = 'ds'"
                        }
                    ],
                    "rule": [
                        {
                            "name": "29259e14",
                            "source": [
                                {
                                    "context": "itm1",
                                    "element": "item",
                                    "listMode": "first",
                                    "variable": "item",
                                    "condition": "(linkId = 'CHE.B7.DE04') and answer.exists()"
                                }
                            ],
                            "rule": [
                                {
                                    "name": "7dd019b4",
                                    "source": [
                                        {
                                            "context": "src"
                                        }
                                    ],
                                    "target": [
                                        {
                                            "context": "bundle",
                                            "contextType": "variable",
                                            "element": "entry",
                                            "variable": "entry"
                                        }
                                    ],
                                    "rule": [
                                        {
                                            "name": "b50ac4c5",
                                            "source": [
                                                {
                                                    "context": "src"
                                                }
                                            ],
                                            "target": [
                                                {
                                                    "context": "entry",
                                                    "contextType": "variable",
                                                    "element": "request",
                                                    "variable": "request"
                                                },
                                                {
                                                    "context": "request",
                                                    "contextType": "variable",
                                                    "element": "method",
                                                    "transform": "copy",
                                                    "parameter": [
                                                        {
                                                            "valueString": "POST"
                                                        }
                                                    ]
                                                },
                                                {
                                                    "contextType": "variable",
                                                    "variable": "uuid",
                                                    "transform": "uuid"
                                                },
                                                {
                                                    "context": "request",
                                                    "contextType": "variable",
                                                    "element": "url",
                                                    "transform": "append",
                                                    "parameter": [
                                                        {
                                                            "valueString": "/Observation/"
                                                        },
                                                        {
                                                            "valueId": "uuid"
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "name": "3064d931",
                                            "source": [
                                                {
                                                    "context": "src"
                                                }
                                            ],
                                            "target": [
                                                {
                                                    "context": "entry",
                                                    "contextType": "variable",
                                                    "element": "resource",
                                                    "variable": "tgt",
                                                    "transform": "create",
                                                    "parameter": [
                                                        {
                                                            "valueString": "Observation"
                                                        }
                                                    ]
                                                }
                                            ],
                                            "rule": [
                                                {
                                                    "name": "8c54d7aa",
                                                    "source": [
                                                        {
                                                            "context": "src"
                                                        }
                                                    ],
                                                    "target": [
                                                        {
                                                            "contextType": "variable",
                                                            "transform": "copy",
                                                            "parameter": [
                                                                {
                                                                    "valueId": "tgt"
                                                                }
                                                            ]
                                                        }
                                                    ],
                                                    "dependent": [
                                                        {
                                                            "name": "cheobservationcheb7de04",
                                                            "variable": [
                                                                "src",
                                                                "tgt"
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "5706ca59",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "listMode": "first",
                            "variable": "itm1",
                            "condition": "linkId = 'ds'"
                        }
                    ],
                    "rule": [
                        {
                            "name": "f2f40226",
                            "source": [
                                {
                                    "context": "itm1",
                                    "element": "item",
                                    "listMode": "first",
                                    "variable": "item",
                                    "condition": "(linkId = 'CHE.B7.DE07') and answer.exists()"
                                }
                            ],
                            "rule": [
                                {
                                    "name": "fa37b236",
                                    "source": [
                                        {
                                            "context": "src"
                                        }
                                    ],
                                    "target": [
                                        {
                                            "context": "bundle",
                                            "contextType": "variable",
                                            "element": "entry",
                                            "variable": "entry"
                                        }
                                    ],
                                    "rule": [
                                        {
                                            "name": "b50ac4c5",
                                            "source": [
                                                {
                                                    "context": "src"
                                                }
                                            ],
                                            "target": [
                                                {
                                                    "context": "entry",
                                                    "contextType": "variable",
                                                    "element": "request",
                                                    "variable": "request"
                                                },
                                                {
                                                    "context": "request",
                                                    "contextType": "variable",
                                                    "element": "method",
                                                    "transform": "copy",
                                                    "parameter": [
                                                        {
                                                            "valueString": "POST"
                                                        }
                                                    ]
                                                },
                                                {
                                                    "contextType": "variable",
                                                    "variable": "uuid",
                                                    "transform": "uuid"
                                                },
                                                {
                                                    "context": "request",
                                                    "contextType": "variable",
                                                    "element": "url",
                                                    "transform": "append",
                                                    "parameter": [
                                                        {
                                                            "valueString": "/Observation/"
                                                        },
                                                        {
                                                            "valueId": "uuid"
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "name": "96641261",
                                            "source": [
                                                {
                                                    "context": "src"
                                                }
                                            ],
                                            "target": [
                                                {
                                                    "context": "entry",
                                                    "contextType": "variable",
                                                    "element": "resource",
                                                    "variable": "tgt",
                                                    "transform": "create",
                                                    "parameter": [
                                                        {
                                                            "valueString": "Observation"
                                                        }
                                                    ]
                                                }
                                            ],
                                            "rule": [
                                                {
                                                    "name": "8dbaa8c1",
                                                    "source": [
                                                        {
                                                            "context": "src"
                                                        }
                                                    ],
                                                    "target": [
                                                        {
                                                            "contextType": "variable",
                                                            "transform": "copy",
                                                            "parameter": [
                                                                {
                                                                    "valueId": "tgt"
                                                                }
                                                            ]
                                                        }
                                                    ],
                                                    "dependent": [
                                                        {
                                                            "name": "cheobservationcheb7de07",
                                                            "variable": [
                                                                "src",
                                                                "tgt"
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "24a7a9bb",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "listMode": "first",
                            "variable": "itm1",
                            "condition": "linkId = 'ds'"
                        }
                    ],
                    "rule": [
                        {
                            "name": "f4014d39",
                            "source": [
                                {
                                    "context": "itm1",
                                    "element": "item",
                                    "listMode": "first",
                                    "variable": "item",
                                    "condition": "(linkId = 'CHE.B7.DE08') and answer.exists()"
                                }
                            ],
                            "rule": [
                                {
                                    "name": "ff32ff5b",
                                    "source": [
                                        {
                                            "context": "src"
                                        }
                                    ],
                                    "target": [
                                        {
                                            "context": "bundle",
                                            "contextType": "variable",
                                            "element": "entry",
                                            "variable": "entry"
                                        }
                                    ],
                                    "rule": [
                                        {
                                            "name": "b50ac4c5",
                                            "source": [
                                                {
                                                    "context": "src"
                                                }
                                            ],
                                            "target": [
                                                {
                                                    "context": "entry",
                                                    "contextType": "variable",
                                                    "element": "request",
                                                    "variable": "request"
                                                },
                                                {
                                                    "context": "request",
                                                    "contextType": "variable",
                                                    "element": "method",
                                                    "transform": "copy",
                                                    "parameter": [
                                                        {
                                                            "valueString": "POST"
                                                        }
                                                    ]
                                                },
                                                {
                                                    "contextType": "variable",
                                                    "variable": "uuid",
                                                    "transform": "uuid"
                                                },
                                                {
                                                    "context": "request",
                                                    "contextType": "variable",
                                                    "element": "url",
                                                    "transform": "append",
                                                    "parameter": [
                                                        {
                                                            "valueString": "/Observation/"
                                                        },
                                                        {
                                                            "valueId": "uuid"
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "name": "39e6456e",
                                            "source": [
                                                {
                                                    "context": "src"
                                                }
                                            ],
                                            "target": [
                                                {
                                                    "context": "entry",
                                                    "contextType": "variable",
                                                    "element": "resource",
                                                    "variable": "tgt",
                                                    "transform": "create",
                                                    "parameter": [
                                                        {
                                                            "valueString": "Observation"
                                                        }
                                                    ]
                                                }
                                            ],
                                            "rule": [
                                                {
                                                    "name": "fc95b380",
                                                    "source": [
                                                        {
                                                            "context": "src"
                                                        }
                                                    ],
                                                    "target": [
                                                        {
                                                            "contextType": "variable",
                                                            "transform": "copy",
                                                            "parameter": [
                                                                {
                                                                    "valueId": "tgt"
                                                                }
                                                            ]
                                                        }
                                                    ],
                                                    "dependent": [
                                                        {
                                                            "name": "cheobservationcheb7de08",
                                                            "variable": [
                                                                "src",
                                                                "tgt"
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "3bdc0ae6",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "listMode": "first",
                            "variable": "itm1",
                            "condition": "linkId = 'ds'"
                        }
                    ],
                    "rule": [
                        {
                            "name": "22230b35",
                            "source": [
                                {
                                    "context": "itm1",
                                    "element": "item",
                                    "listMode": "first",
                                    "variable": "item",
                                    "condition": "(linkId = 'CHE.B7.DE09') and answer.exists()"
                                }
                            ],
                            "rule": [
                                {
                                    "name": "1f4cd941",
                                    "source": [
                                        {
                                            "context": "src"
                                        }
                                    ],
                                    "target": [
                                        {
                                            "context": "bundle",
                                            "contextType": "variable",
                                            "element": "entry",
                                            "variable": "entry"
                                        }
                                    ],
                                    "rule": [
                                        {
                                            "name": "b50ac4c5",
                                            "source": [
                                                {
                                                    "context": "src"
                                                }
                                            ],
                                            "target": [
                                                {
                                                    "context": "entry",
                                                    "contextType": "variable",
                                                    "element": "request",
                                                    "variable": "request"
                                                },
                                                {
                                                    "context": "request",
                                                    "contextType": "variable",
                                                    "element": "method",
                                                    "transform": "copy",
                                                    "parameter": [
                                                        {
                                                            "valueString": "POST"
                                                        }
                                                    ]
                                                },
                                                {
                                                    "contextType": "variable",
                                                    "variable": "uuid",
                                                    "transform": "uuid"
                                                },
                                                {
                                                    "context": "request",
                                                    "contextType": "variable",
                                                    "element": "url",
                                                    "transform": "append",
                                                    "parameter": [
                                                        {
                                                            "valueString": "/Observation/"
                                                        },
                                                        {
                                                            "valueId": "uuid"
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "name": "b167af1c",
                                            "source": [
                                                {
                                                    "context": "src"
                                                }
                                            ],
                                            "target": [
                                                {
                                                    "context": "entry",
                                                    "contextType": "variable",
                                                    "element": "resource",
                                                    "variable": "tgt",
                                                    "transform": "create",
                                                    "parameter": [
                                                        {
                                                            "valueString": "Observation"
                                                        }
                                                    ]
                                                }
                                            ],
                                            "rule": [
                                                {
                                                    "name": "dbcf420b",
                                                    "source": [
                                                        {
                                                            "context": "src"
                                                        }
                                                    ],
                                                    "target": [
                                                        {
                                                            "contextType": "variable",
                                                            "transform": "copy",
                                                            "parameter": [
                                                                {
                                                                    "valueId": "tgt"
                                                                }
                                                            ]
                                                        }
                                                    ],
                                                    "dependent": [
                                                        {
                                                            "name": "cheobservationcheb7de09",
                                                            "variable": [
                                                                "src",
                                                                "tgt"
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "29197ec4",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "listMode": "first",
                            "variable": "itm1",
                            "condition": "linkId = 'ds'"
                        }
                    ],
                    "rule": [
                        {
                            "name": "40e6e7f6",
                            "source": [
                                {
                                    "context": "itm1",
                                    "element": "item",
                                    "listMode": "first",
                                    "variable": "item",
                                    "condition": "(linkId = 'CHE.B7.DE10') and answer.exists()"
                                }
                            ],
                            "rule": [
                                {
                                    "name": "5112eabc",
                                    "source": [
                                        {
                                            "context": "src"
                                        }
                                    ],
                                    "target": [
                                        {
                                            "context": "bundle",
                                            "contextType": "variable",
                                            "element": "entry",
                                            "variable": "entry"
                                        }
                                    ],
                                    "rule": [
                                        {
                                            "name": "b50ac4c5",
                                            "source": [
                                                {
                                                    "context": "src"
                                                }
                                            ],
                                            "target": [
                                                {
                                                    "context": "entry",
                                                    "contextType": "variable",
                                                    "element": "request",
                                                    "variable": "request"
                                                },
                                                {
                                                    "context": "request",
                                                    "contextType": "variable",
                                                    "element": "method",
                                                    "transform": "copy",
                                                    "parameter": [
                                                        {
                                                            "valueString": "POST"
                                                        }
                                                    ]
                                                },
                                                {
                                                    "contextType": "variable",
                                                    "variable": "uuid",
                                                    "transform": "uuid"
                                                },
                                                {
                                                    "context": "request",
                                                    "contextType": "variable",
                                                    "element": "url",
                                                    "transform": "append",
                                                    "parameter": [
                                                        {
                                                            "valueString": "/Observation/"
                                                        },
                                                        {
                                                            "valueId": "uuid"
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "name": "d5f13abf",
                                            "source": [
                                                {
                                                    "context": "src"
                                                }
                                            ],
                                            "target": [
                                                {
                                                    "context": "entry",
                                                    "contextType": "variable",
                                                    "element": "resource",
                                                    "variable": "tgt",
                                                    "transform": "create",
                                                    "parameter": [
                                                        {
                                                            "valueString": "Observation"
                                                        }
                                                    ]
                                                }
                                            ],
                                            "rule": [
                                                {
                                                    "name": "11652079",
                                                    "source": [
                                                        {
                                                            "context": "src"
                                                        }
                                                    ],
                                                    "target": [
                                                        {
                                                            "contextType": "variable",
                                                            "transform": "copy",
                                                            "parameter": [
                                                                {
                                                                    "valueId": "tgt"
                                                                }
                                                            ]
                                                        }
                                                    ],
                                                    "dependent": [
                                                        {
                                                            "name": "cheobservationcheb7de10",
                                                            "variable": [
                                                                "src",
                                                                "tgt"
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "name": "cheobservationcheb7de01",
            "typeMode": "none",
            "input": [
                {
                    "name": "src",
                    "mode": "source"
                },
                {
                    "name": "tgt",
                    "mode": "target"
                }
            ],
            "rule": [
                {
                    "name": "id-cheb7de01",
                    "source": [
                        {
                            "context": "src"
                        }
                    ],
                    "target": [
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "identifier",
                            "variable": "CodeID",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Identifier"
                                }
                            ]
                        },
                        {
                            "context": "CodeID",
                            "contextType": "variable",
                            "element": "system",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "http://hl7.org/fhir/namingsystem-identifier-type"
                                }
                            ]
                        },
                        {
                            "context": "CodeID",
                            "contextType": "variable",
                            "element": "use",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "official"
                                }
                            ]
                        },
                        {
                            "context": "CodeID",
                            "contextType": "variable",
                            "element": "value",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "uuid"
                                }
                            ]
                        },
                        {
                            "context": "CodeID",
                            "contextType": "variable",
                            "element": "id",
                            "transform": "uuid"
                        }
                    ]
                },
                {
                    "name": "35bc6b82",
                    "source": [
                        {
                            "context": "src",
                            "element": "encounter",
                            "variable": "encounter"
                        }
                    ],
                    "target": [
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "encounter",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueId": "encounter"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "code-cheb7de01",
                    "source": [
                        {
                            "context": "src",
                            "element": "subject",
                            "variable": "subject"
                        }
                    ],
                    "target": [
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "subject",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueId": "subject"
                                }
                            ]
                        },
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "meta",
                            "variable": "newMeta",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Meta"
                                }
                            ]
                        },
                        {
                            "context": "newMeta",
                            "contextType": "variable",
                            "element": "profile",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "https://fhir.dk.swisstph-mis.ch/matchbox/fhir/StructureDefinition/cheobservation"
                                }
                            ]
                        },
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "code",
                            "variable": "concept",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "CodeableConcept"
                                }
                            ]
                        },
                        {
                            "context": "concept",
                            "contextType": "variable",
                            "element": "coding",
                            "variable": "coding",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Coding"
                                }
                            ]
                        },
                        {
                            "context": "coding",
                            "contextType": "variable",
                            "element": "system",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "https://fhir.dk.swisstph-mis.ch/matchbox/fhir/CodeSystem/che-custom-codes"
                                }
                            ]
                        },
                        {
                            "context": "coding",
                            "contextType": "variable",
                            "element": "code",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "CHE.B7.DE01"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "aae7a11d",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "itemtimestamp",
                            "condition": "linkId = 'timestamp'"
                        }
                    ],
                    "rule": [
                        {
                            "name": "7f22f29f",
                            "source": [
                                {
                                    "context": "itemtimestamp",
                                    "element": "answer",
                                    "listMode": "first",
                                    "variable": "atimestamp"
                                }
                            ],
                            "rule": [
                                {
                                    "name": "5af77f2c",
                                    "source": [
                                        {
                                            "context": "atimestamp",
                                            "element": "value",
                                            "variable": "val"
                                        }
                                    ],
                                    "target": [
                                        {
                                            "context": "tgt",
                                            "contextType": "variable",
                                            "element": "issued",
                                            "transform": "copy",
                                            "parameter": [
                                                {
                                                    "valueId": "val"
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "patient",
                    "source": [
                        {
                            "context": "src",
                            "element": "subject",
                            "variable": "subject"
                        }
                    ],
                    "target": [
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "subject",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueId": "subject"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "4e154863",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "listMode": "first",
                            "variable": "itm1",
                            "condition": "linkId = 'LTI'"
                        }
                    ],
                    "rule": [
                        {
                            "name": "31c15607",
                            "source": [
                                {
                                    "context": "itm1",
                                    "element": "item",
                                    "listMode": "first",
                                    "variable": "item",
                                    "condition": "(linkId = 'CHE.B7.DE01') and answer.exists()"
                                }
                            ],
                            "rule": [
                                {
                                    "name": "bdab9370",
                                    "source": [
                                        {
                                            "context": "item",
                                            "element": "answer",
                                            "listMode": "first",
                                            "variable": "a"
                                        }
                                    ],
                                    "rule": [
                                        {
                                            "name": "final-cheb7de01",
                                            "source": [
                                                {
                                                    "context": "a",
                                                    "condition": "a.value = true"
                                                }
                                            ],
                                            "target": [
                                                {
                                                    "context": "tgt",
                                                    "contextType": "variable",
                                                    "element": "status",
                                                    "transform": "copy",
                                                    "parameter": [
                                                        {
                                                            "valueString": "final"
                                                        }
                                                    ]
                                                },
                                                {
                                                    "context": "tgt",
                                                    "contextType": "variable",
                                                    "element": "value",
                                                    "transform": "copy",
                                                    "parameter": [
                                                        {
                                                            "valueBoolean": true
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "name": "notfound-cheb7de01",
                                            "source": [
                                                {
                                                    "context": "a",
                                                    "condition": "a.value = false"
                                                }
                                            ],
                                            "target": [
                                                {
                                                    "context": "tgt",
                                                    "contextType": "variable",
                                                    "element": "status",
                                                    "transform": "copy",
                                                    "parameter": [
                                                        {
                                                            "valueString": "cancelled"
                                                        }
                                                    ]
                                                },
                                                {
                                                    "context": "tgt",
                                                    "contextType": "variable",
                                                    "element": "value",
                                                    "transform": "copy",
                                                    "parameter": [
                                                        {
                                                            "valueBoolean": false
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "name": "cheobservationcheb7de01tt",
            "typeMode": "none",
            "input": [
                {
                    "name": "src",
                    "mode": "source"
                },
                {
                    "name": "tgt",
                    "mode": "target"
                }
            ],
            "rule": [
                {
                    "name": "id-cheb7de01tt",
                    "source": [
                        {
                            "context": "src"
                        }
                    ],
                    "target": [
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "identifier",
                            "variable": "CodeID",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Identifier"
                                }
                            ]
                        },
                        {
                            "context": "CodeID",
                            "contextType": "variable",
                            "element": "system",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "http://hl7.org/fhir/namingsystem-identifier-type"
                                }
                            ]
                        },
                        {
                            "context": "CodeID",
                            "contextType": "variable",
                            "element": "use",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "official"
                                }
                            ]
                        },
                        {
                            "context": "CodeID",
                            "contextType": "variable",
                            "element": "value",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "uuid"
                                }
                            ]
                        },
                        {
                            "context": "CodeID",
                            "contextType": "variable",
                            "element": "id",
                            "transform": "uuid"
                        }
                    ]
                },
                {
                    "name": "35bc6b82",
                    "source": [
                        {
                            "context": "src",
                            "element": "encounter",
                            "variable": "encounter"
                        }
                    ],
                    "target": [
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "encounter",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueId": "encounter"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "code-cheb7de01tt",
                    "source": [
                        {
                            "context": "src",
                            "element": "subject",
                            "variable": "subject"
                        }
                    ],
                    "target": [
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "subject",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueId": "subject"
                                }
                            ]
                        },
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "meta",
                            "variable": "newMeta",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Meta"
                                }
                            ]
                        },
                        {
                            "context": "newMeta",
                            "contextType": "variable",
                            "element": "profile",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "https://fhir.dk.swisstph-mis.ch/matchbox/fhir/StructureDefinition/cheobservation"
                                }
                            ]
                        },
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "code",
                            "variable": "concept",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "CodeableConcept"
                                }
                            ]
                        },
                        {
                            "context": "concept",
                            "contextType": "variable",
                            "element": "coding",
                            "variable": "coding",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Coding"
                                }
                            ]
                        },
                        {
                            "context": "coding",
                            "contextType": "variable",
                            "element": "system",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "https://fhir.dk.swisstph-mis.ch/matchbox/fhir/CodeSystem/che-custom-codes"
                                }
                            ]
                        },
                        {
                            "context": "coding",
                            "contextType": "variable",
                            "element": "code",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "CHE.B7.DE01-tt"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "aae7a11d",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "itemtimestamp",
                            "condition": "linkId = 'timestamp'"
                        }
                    ],
                    "rule": [
                        {
                            "name": "7f22f29f",
                            "source": [
                                {
                                    "context": "itemtimestamp",
                                    "element": "answer",
                                    "listMode": "first",
                                    "variable": "atimestamp"
                                }
                            ],
                            "rule": [
                                {
                                    "name": "5af77f2c",
                                    "source": [
                                        {
                                            "context": "atimestamp",
                                            "element": "value",
                                            "variable": "val"
                                        }
                                    ],
                                    "target": [
                                        {
                                            "context": "tgt",
                                            "contextType": "variable",
                                            "element": "issued",
                                            "transform": "copy",
                                            "parameter": [
                                                {
                                                    "valueId": "val"
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "patient",
                    "source": [
                        {
                            "context": "src",
                            "element": "subject",
                            "variable": "subject"
                        }
                    ],
                    "target": [
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "subject",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueId": "subject"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "6029e684",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "listMode": "first",
                            "variable": "itm1",
                            "condition": "linkId = 'LTI'"
                        }
                    ],
                    "rule": [
                        {
                            "name": "015ed333",
                            "source": [
                                {
                                    "context": "itm1",
                                    "element": "item",
                                    "listMode": "first",
                                    "variable": "item",
                                    "condition": "(linkId = 'CHE.B7.DE01-tt') and answer.exists()"
                                }
                            ],
                            "rule": [
                                {
                                    "name": "bdab9370",
                                    "source": [
                                        {
                                            "context": "item",
                                            "element": "answer",
                                            "listMode": "first",
                                            "variable": "a"
                                        }
                                    ],
                                    "rule": [
                                        {
                                            "name": "final-cheb7de01tt",
                                            "source": [
                                                {
                                                    "context": "a",
                                                    "condition": "a.value = true"
                                                }
                                            ],
                                            "target": [
                                                {
                                                    "context": "tgt",
                                                    "contextType": "variable",
                                                    "element": "status",
                                                    "transform": "copy",
                                                    "parameter": [
                                                        {
                                                            "valueString": "final"
                                                        }
                                                    ]
                                                },
                                                {
                                                    "context": "tgt",
                                                    "contextType": "variable",
                                                    "element": "value",
                                                    "transform": "copy",
                                                    "parameter": [
                                                        {
                                                            "valueBoolean": true
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "name": "notfound-cheb7de01tt",
                                            "source": [
                                                {
                                                    "context": "a",
                                                    "condition": "a.value = false"
                                                }
                                            ],
                                            "target": [
                                                {
                                                    "context": "tgt",
                                                    "contextType": "variable",
                                                    "element": "status",
                                                    "transform": "copy",
                                                    "parameter": [
                                                        {
                                                            "valueString": "cancelled"
                                                        }
                                                    ]
                                                },
                                                {
                                                    "context": "tgt",
                                                    "contextType": "variable",
                                                    "element": "value",
                                                    "transform": "copy",
                                                    "parameter": [
                                                        {
                                                            "valueBoolean": false
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "name": "cheobservationcheb7de02",
            "typeMode": "none",
            "input": [
                {
                    "name": "src",
                    "mode": "source"
                },
                {
                    "name": "tgt",
                    "mode": "target"
                }
            ],
            "rule": [
                {
                    "name": "id-cheb7de02",
                    "source": [
                        {
                            "context": "src"
                        }
                    ],
                    "target": [
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "identifier",
                            "variable": "CodeID",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Identifier"
                                }
                            ]
                        },
                        {
                            "context": "CodeID",
                            "contextType": "variable",
                            "element": "system",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "http://hl7.org/fhir/namingsystem-identifier-type"
                                }
                            ]
                        },
                        {
                            "context": "CodeID",
                            "contextType": "variable",
                            "element": "use",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "official"
                                }
                            ]
                        },
                        {
                            "context": "CodeID",
                            "contextType": "variable",
                            "element": "value",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "uuid"
                                }
                            ]
                        },
                        {
                            "context": "CodeID",
                            "contextType": "variable",
                            "element": "id",
                            "transform": "uuid"
                        }
                    ]
                },
                {
                    "name": "35bc6b82",
                    "source": [
                        {
                            "context": "src",
                            "element": "encounter",
                            "variable": "encounter"
                        }
                    ],
                    "target": [
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "encounter",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueId": "encounter"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "code-cheb7de02",
                    "source": [
                        {
                            "context": "src",
                            "element": "subject",
                            "variable": "subject"
                        }
                    ],
                    "target": [
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "subject",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueId": "subject"
                                }
                            ]
                        },
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "meta",
                            "variable": "newMeta",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Meta"
                                }
                            ]
                        },
                        {
                            "context": "newMeta",
                            "contextType": "variable",
                            "element": "profile",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "https://fhir.dk.swisstph-mis.ch/matchbox/fhir/StructureDefinition/cheobservation"
                                }
                            ]
                        },
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "code",
                            "variable": "concept",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "CodeableConcept"
                                }
                            ]
                        },
                        {
                            "context": "concept",
                            "contextType": "variable",
                            "element": "coding",
                            "variable": "coding",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Coding"
                                }
                            ]
                        },
                        {
                            "context": "coding",
                            "contextType": "variable",
                            "element": "system",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "https://fhir.dk.swisstph-mis.ch/matchbox/fhir/CodeSystem/che-custom-codes"
                                }
                            ]
                        },
                        {
                            "context": "coding",
                            "contextType": "variable",
                            "element": "code",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "CHE.B7.DE02"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "aae7a11d",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "itemtimestamp",
                            "condition": "linkId = 'timestamp'"
                        }
                    ],
                    "rule": [
                        {
                            "name": "7f22f29f",
                            "source": [
                                {
                                    "context": "itemtimestamp",
                                    "element": "answer",
                                    "listMode": "first",
                                    "variable": "atimestamp"
                                }
                            ],
                            "rule": [
                                {
                                    "name": "5af77f2c",
                                    "source": [
                                        {
                                            "context": "atimestamp",
                                            "element": "value",
                                            "variable": "val"
                                        }
                                    ],
                                    "target": [
                                        {
                                            "context": "tgt",
                                            "contextType": "variable",
                                            "element": "issued",
                                            "transform": "copy",
                                            "parameter": [
                                                {
                                                    "valueId": "val"
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "patient",
                    "source": [
                        {
                            "context": "src",
                            "element": "subject",
                            "variable": "subject"
                        }
                    ],
                    "target": [
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "subject",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueId": "subject"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "2f78f394",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "listMode": "first",
                            "variable": "itm1",
                            "condition": "linkId = 'LTI'"
                        }
                    ],
                    "rule": [
                        {
                            "name": "5ab27008",
                            "source": [
                                {
                                    "context": "itm1",
                                    "element": "item",
                                    "listMode": "first",
                                    "variable": "item",
                                    "condition": "(linkId = 'CHE.B7.DE02') and answer.exists()"
                                }
                            ],
                            "rule": [
                                {
                                    "name": "bdab9370",
                                    "source": [
                                        {
                                            "context": "item",
                                            "element": "answer",
                                            "listMode": "first",
                                            "variable": "a"
                                        }
                                    ],
                                    "rule": [
                                        {
                                            "name": "final-cheb7de02",
                                            "source": [
                                                {
                                                    "context": "a",
                                                    "condition": "a.value = true"
                                                }
                                            ],
                                            "target": [
                                                {
                                                    "context": "tgt",
                                                    "contextType": "variable",
                                                    "element": "status",
                                                    "transform": "copy",
                                                    "parameter": [
                                                        {
                                                            "valueString": "final"
                                                        }
                                                    ]
                                                },
                                                {
                                                    "context": "tgt",
                                                    "contextType": "variable",
                                                    "element": "value",
                                                    "transform": "copy",
                                                    "parameter": [
                                                        {
                                                            "valueBoolean": true
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "name": "notfound-cheb7de02",
                                            "source": [
                                                {
                                                    "context": "a",
                                                    "condition": "a.value = false"
                                                }
                                            ],
                                            "target": [
                                                {
                                                    "context": "tgt",
                                                    "contextType": "variable",
                                                    "element": "status",
                                                    "transform": "copy",
                                                    "parameter": [
                                                        {
                                                            "valueString": "cancelled"
                                                        }
                                                    ]
                                                },
                                                {
                                                    "context": "tgt",
                                                    "contextType": "variable",
                                                    "element": "value",
                                                    "transform": "copy",
                                                    "parameter": [
                                                        {
                                                            "valueBoolean": false
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "name": "cheobservationcheb7b8b9de01",
            "typeMode": "none",
            "input": [
                {
                    "name": "src",
                    "mode": "source"
                },
                {
                    "name": "tgt",
                    "mode": "target"
                }
            ],
            "rule": [
                {
                    "name": "id-cheb7b8b9de01",
                    "source": [
                        {
                            "context": "src"
                        }
                    ],
                    "target": [
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "identifier",
                            "variable": "CodeID",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Identifier"
                                }
                            ]
                        },
                        {
                            "context": "CodeID",
                            "contextType": "variable",
                            "element": "system",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "http://hl7.org/fhir/namingsystem-identifier-type"
                                }
                            ]
                        },
                        {
                            "context": "CodeID",
                            "contextType": "variable",
                            "element": "use",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "official"
                                }
                            ]
                        },
                        {
                            "context": "CodeID",
                            "contextType": "variable",
                            "element": "value",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "uuid"
                                }
                            ]
                        },
                        {
                            "context": "CodeID",
                            "contextType": "variable",
                            "element": "id",
                            "transform": "uuid"
                        }
                    ]
                },
                {
                    "name": "35bc6b82",
                    "source": [
                        {
                            "context": "src",
                            "element": "encounter",
                            "variable": "encounter"
                        }
                    ],
                    "target": [
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "encounter",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueId": "encounter"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "code-cheb7b8b9de01",
                    "source": [
                        {
                            "context": "src",
                            "element": "subject",
                            "variable": "subject"
                        }
                    ],
                    "target": [
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "subject",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueId": "subject"
                                }
                            ]
                        },
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "meta",
                            "variable": "newMeta",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Meta"
                                }
                            ]
                        },
                        {
                            "context": "newMeta",
                            "contextType": "variable",
                            "element": "profile",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "https://fhir.dk.swisstph-mis.ch/matchbox/fhir/StructureDefinition/cheobservation"
                                }
                            ]
                        },
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "code",
                            "variable": "concept",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "CodeableConcept"
                                }
                            ]
                        },
                        {
                            "context": "concept",
                            "contextType": "variable",
                            "element": "coding",
                            "variable": "coding",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Coding"
                                }
                            ]
                        },
                        {
                            "context": "coding",
                            "contextType": "variable",
                            "element": "system",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "https://fhir.dk.swisstph-mis.ch/matchbox/fhir/CodeSystem/che-custom-codes"
                                }
                            ]
                        },
                        {
                            "context": "coding",
                            "contextType": "variable",
                            "element": "code",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "CHE.B7.B8.B9.DE01"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "aae7a11d",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "itemtimestamp",
                            "condition": "linkId = 'timestamp'"
                        }
                    ],
                    "rule": [
                        {
                            "name": "7f22f29f",
                            "source": [
                                {
                                    "context": "itemtimestamp",
                                    "element": "answer",
                                    "listMode": "first",
                                    "variable": "atimestamp"
                                }
                            ],
                            "rule": [
                                {
                                    "name": "5af77f2c",
                                    "source": [
                                        {
                                            "context": "atimestamp",
                                            "element": "value",
                                            "variable": "val"
                                        }
                                    ],
                                    "target": [
                                        {
                                            "context": "tgt",
                                            "contextType": "variable",
                                            "element": "issued",
                                            "transform": "copy",
                                            "parameter": [
                                                {
                                                    "valueId": "val"
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "patient",
                    "source": [
                        {
                            "context": "src",
                            "element": "subject",
                            "variable": "subject"
                        }
                    ],
                    "target": [
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "subject",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueId": "subject"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "37fe0ecf",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "listMode": "first",
                            "variable": "itm1",
                            "condition": "linkId = 'LTI'"
                        }
                    ],
                    "rule": [
                        {
                            "name": "fc6944d0",
                            "source": [
                                {
                                    "context": "itm1",
                                    "element": "item",
                                    "listMode": "first",
                                    "variable": "item",
                                    "condition": "(linkId = 'CHE.B7.B8.B9.DE01') and answer.exists()"
                                }
                            ],
                            "rule": [
                                {
                                    "name": "7c587a4b",
                                    "source": [
                                        {
                                            "context": "item",
                                            "element": "answer",
                                            "listMode": "first",
                                            "variable": "a"
                                        }
                                    ],
                                    "rule": [
                                        {
                                            "name": "4ca9082e",
                                            "source": [
                                                {
                                                    "context": "a",
                                                    "element": "value",
                                                    "variable": "val"
                                                }
                                            ],
                                            "rule": [
                                                {
                                                    "name": "8ab1d7a5",
                                                    "source": [
                                                        {
                                                            "context": "val",
                                                            "condition": "val.code = 'none'"
                                                        }
                                                    ],
                                                    "target": [
                                                        {
                                                            "context": "tgt",
                                                            "contextType": "variable",
                                                            "element": "status",
                                                            "transform": "copy",
                                                            "parameter": [
                                                                {
                                                                    "valueString": "cancelled"
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "name": "a1050460",
                                                    "source": [
                                                        {
                                                            "context": "val",
                                                            "condition": "val.code != 'none'"
                                                        }
                                                    ],
                                                    "target": [
                                                        {
                                                            "context": "tgt",
                                                            "contextType": "variable",
                                                            "element": "value",
                                                            "variable": "cc",
                                                            "transform": "create",
                                                            "parameter": [
                                                                {
                                                                    "valueString": "CodeableConcept"
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "context": "cc",
                                                            "contextType": "variable",
                                                            "element": "coding",
                                                            "transform": "copy",
                                                            "parameter": [
                                                                {
                                                                    "valueId": "val"
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "context": "tgt",
                                                            "contextType": "variable",
                                                            "element": "status",
                                                            "transform": "copy",
                                                            "parameter": [
                                                                {
                                                                    "valueString": "final"
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "name": "cheobservationcheb7de03",
            "typeMode": "none",
            "input": [
                {
                    "name": "src",
                    "mode": "source"
                },
                {
                    "name": "tgt",
                    "mode": "target"
                }
            ],
            "rule": [
                {
                    "name": "id-cheb7de03",
                    "source": [
                        {
                            "context": "src"
                        }
                    ],
                    "target": [
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "identifier",
                            "variable": "CodeID",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Identifier"
                                }
                            ]
                        },
                        {
                            "context": "CodeID",
                            "contextType": "variable",
                            "element": "system",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "http://hl7.org/fhir/namingsystem-identifier-type"
                                }
                            ]
                        },
                        {
                            "context": "CodeID",
                            "contextType": "variable",
                            "element": "use",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "official"
                                }
                            ]
                        },
                        {
                            "context": "CodeID",
                            "contextType": "variable",
                            "element": "value",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "uuid"
                                }
                            ]
                        },
                        {
                            "context": "CodeID",
                            "contextType": "variable",
                            "element": "id",
                            "transform": "uuid"
                        }
                    ]
                },
                {
                    "name": "35bc6b82",
                    "source": [
                        {
                            "context": "src",
                            "element": "encounter",
                            "variable": "encounter"
                        }
                    ],
                    "target": [
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "encounter",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueId": "encounter"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "code-cheb7de03",
                    "source": [
                        {
                            "context": "src",
                            "element": "subject",
                            "variable": "subject"
                        }
                    ],
                    "target": [
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "subject",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueId": "subject"
                                }
                            ]
                        },
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "meta",
                            "variable": "newMeta",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Meta"
                                }
                            ]
                        },
                        {
                            "context": "newMeta",
                            "contextType": "variable",
                            "element": "profile",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "https://fhir.dk.swisstph-mis.ch/matchbox/fhir/StructureDefinition/cheobservation"
                                }
                            ]
                        },
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "code",
                            "variable": "concept",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "CodeableConcept"
                                }
                            ]
                        },
                        {
                            "context": "concept",
                            "contextType": "variable",
                            "element": "coding",
                            "variable": "coding",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Coding"
                                }
                            ]
                        },
                        {
                            "context": "coding",
                            "contextType": "variable",
                            "element": "system",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "https://fhir.dk.swisstph-mis.ch/matchbox/fhir/CodeSystem/che-custom-codes"
                                }
                            ]
                        },
                        {
                            "context": "coding",
                            "contextType": "variable",
                            "element": "code",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "CHE.B7.DE03"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "aae7a11d",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "itemtimestamp",
                            "condition": "linkId = 'timestamp'"
                        }
                    ],
                    "rule": [
                        {
                            "name": "7f22f29f",
                            "source": [
                                {
                                    "context": "itemtimestamp",
                                    "element": "answer",
                                    "listMode": "first",
                                    "variable": "atimestamp"
                                }
                            ],
                            "rule": [
                                {
                                    "name": "5af77f2c",
                                    "source": [
                                        {
                                            "context": "atimestamp",
                                            "element": "value",
                                            "variable": "val"
                                        }
                                    ],
                                    "target": [
                                        {
                                            "context": "tgt",
                                            "contextType": "variable",
                                            "element": "issued",
                                            "transform": "copy",
                                            "parameter": [
                                                {
                                                    "valueId": "val"
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "patient",
                    "source": [
                        {
                            "context": "src",
                            "element": "subject",
                            "variable": "subject"
                        }
                    ],
                    "target": [
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "subject",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueId": "subject"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "e2cab342",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "listMode": "first",
                            "variable": "itm1",
                            "condition": "linkId = 'ds'"
                        }
                    ],
                    "rule": [
                        {
                            "name": "b2289b9b",
                            "source": [
                                {
                                    "context": "itm1",
                                    "element": "item",
                                    "listMode": "first",
                                    "variable": "item",
                                    "condition": "(linkId = 'CHE.B7.DE03') and answer.exists()"
                                }
                            ],
                            "rule": [
                                {
                                    "name": "bdab9370",
                                    "source": [
                                        {
                                            "context": "item",
                                            "element": "answer",
                                            "listMode": "first",
                                            "variable": "a"
                                        }
                                    ],
                                    "rule": [
                                        {
                                            "name": "final-cheb7de03",
                                            "source": [
                                                {
                                                    "context": "a",
                                                    "condition": "a.value = true"
                                                }
                                            ],
                                            "target": [
                                                {
                                                    "context": "tgt",
                                                    "contextType": "variable",
                                                    "element": "status",
                                                    "transform": "copy",
                                                    "parameter": [
                                                        {
                                                            "valueString": "final"
                                                        }
                                                    ]
                                                },
                                                {
                                                    "context": "tgt",
                                                    "contextType": "variable",
                                                    "element": "value",
                                                    "transform": "copy",
                                                    "parameter": [
                                                        {
                                                            "valueBoolean": true
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "name": "notfound-cheb7de03",
                                            "source": [
                                                {
                                                    "context": "a",
                                                    "condition": "a.value = false"
                                                }
                                            ],
                                            "target": [
                                                {
                                                    "context": "tgt",
                                                    "contextType": "variable",
                                                    "element": "status",
                                                    "transform": "copy",
                                                    "parameter": [
                                                        {
                                                            "valueString": "cancelled"
                                                        }
                                                    ]
                                                },
                                                {
                                                    "context": "tgt",
                                                    "contextType": "variable",
                                                    "element": "value",
                                                    "transform": "copy",
                                                    "parameter": [
                                                        {
                                                            "valueBoolean": false
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "name": "cheobservationcheb7de04",
            "typeMode": "none",
            "input": [
                {
                    "name": "src",
                    "mode": "source"
                },
                {
                    "name": "tgt",
                    "mode": "target"
                }
            ],
            "rule": [
                {
                    "name": "id-cheb7de04",
                    "source": [
                        {
                            "context": "src"
                        }
                    ],
                    "target": [
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "identifier",
                            "variable": "CodeID",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Identifier"
                                }
                            ]
                        },
                        {
                            "context": "CodeID",
                            "contextType": "variable",
                            "element": "system",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "http://hl7.org/fhir/namingsystem-identifier-type"
                                }
                            ]
                        },
                        {
                            "context": "CodeID",
                            "contextType": "variable",
                            "element": "use",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "official"
                                }
                            ]
                        },
                        {
                            "context": "CodeID",
                            "contextType": "variable",
                            "element": "value",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "uuid"
                                }
                            ]
                        },
                        {
                            "context": "CodeID",
                            "contextType": "variable",
                            "element": "id",
                            "transform": "uuid"
                        }
                    ]
                },
                {
                    "name": "35bc6b82",
                    "source": [
                        {
                            "context": "src",
                            "element": "encounter",
                            "variable": "encounter"
                        }
                    ],
                    "target": [
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "encounter",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueId": "encounter"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "code-cheb7de04",
                    "source": [
                        {
                            "context": "src",
                            "element": "subject",
                            "variable": "subject"
                        }
                    ],
                    "target": [
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "subject",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueId": "subject"
                                }
                            ]
                        },
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "meta",
                            "variable": "newMeta",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Meta"
                                }
                            ]
                        },
                        {
                            "context": "newMeta",
                            "contextType": "variable",
                            "element": "profile",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "https://fhir.dk.swisstph-mis.ch/matchbox/fhir/StructureDefinition/cheobservation"
                                }
                            ]
                        },
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "code",
                            "variable": "concept",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "CodeableConcept"
                                }
                            ]
                        },
                        {
                            "context": "concept",
                            "contextType": "variable",
                            "element": "coding",
                            "variable": "coding",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Coding"
                                }
                            ]
                        },
                        {
                            "context": "coding",
                            "contextType": "variable",
                            "element": "system",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "https://fhir.dk.swisstph-mis.ch/matchbox/fhir/CodeSystem/che-custom-codes"
                                }
                            ]
                        },
                        {
                            "context": "coding",
                            "contextType": "variable",
                            "element": "code",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "CHE.B7.DE04"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "aae7a11d",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "itemtimestamp",
                            "condition": "linkId = 'timestamp'"
                        }
                    ],
                    "rule": [
                        {
                            "name": "7f22f29f",
                            "source": [
                                {
                                    "context": "itemtimestamp",
                                    "element": "answer",
                                    "listMode": "first",
                                    "variable": "atimestamp"
                                }
                            ],
                            "rule": [
                                {
                                    "name": "5af77f2c",
                                    "source": [
                                        {
                                            "context": "atimestamp",
                                            "element": "value",
                                            "variable": "val"
                                        }
                                    ],
                                    "target": [
                                        {
                                            "context": "tgt",
                                            "contextType": "variable",
                                            "element": "issued",
                                            "transform": "copy",
                                            "parameter": [
                                                {
                                                    "valueId": "val"
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "patient",
                    "source": [
                        {
                            "context": "src",
                            "element": "subject",
                            "variable": "subject"
                        }
                    ],
                    "target": [
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "subject",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueId": "subject"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "d2667a29",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "listMode": "first",
                            "variable": "itm1",
                            "condition": "linkId = 'ds'"
                        }
                    ],
                    "rule": [
                        {
                            "name": "439124b7",
                            "source": [
                                {
                                    "context": "itm1",
                                    "element": "item",
                                    "listMode": "first",
                                    "variable": "item",
                                    "condition": "(linkId = 'CHE.B7.DE04') and answer.exists()"
                                }
                            ],
                            "rule": [
                                {
                                    "name": "7c587a4b",
                                    "source": [
                                        {
                                            "context": "item",
                                            "element": "answer",
                                            "listMode": "first",
                                            "variable": "a"
                                        }
                                    ],
                                    "rule": [
                                        {
                                            "name": "4ca9082e",
                                            "source": [
                                                {
                                                    "context": "a",
                                                    "element": "value",
                                                    "variable": "val"
                                                }
                                            ],
                                            "rule": [
                                                {
                                                    "name": "8ab1d7a5",
                                                    "source": [
                                                        {
                                                            "context": "val",
                                                            "condition": "val.code = 'none'"
                                                        }
                                                    ],
                                                    "target": [
                                                        {
                                                            "context": "tgt",
                                                            "contextType": "variable",
                                                            "element": "status",
                                                            "transform": "copy",
                                                            "parameter": [
                                                                {
                                                                    "valueString": "cancelled"
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "name": "a1050460",
                                                    "source": [
                                                        {
                                                            "context": "val",
                                                            "condition": "val.code != 'none'"
                                                        }
                                                    ],
                                                    "target": [
                                                        {
                                                            "context": "tgt",
                                                            "contextType": "variable",
                                                            "element": "value",
                                                            "variable": "cc",
                                                            "transform": "create",
                                                            "parameter": [
                                                                {
                                                                    "valueString": "CodeableConcept"
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "context": "cc",
                                                            "contextType": "variable",
                                                            "element": "coding",
                                                            "transform": "copy",
                                                            "parameter": [
                                                                {
                                                                    "valueId": "val"
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "context": "tgt",
                                                            "contextType": "variable",
                                                            "element": "status",
                                                            "transform": "copy",
                                                            "parameter": [
                                                                {
                                                                    "valueString": "final"
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "name": "cheobservationcheb7de07",
            "typeMode": "none",
            "input": [
                {
                    "name": "src",
                    "mode": "source"
                },
                {
                    "name": "tgt",
                    "mode": "target"
                }
            ],
            "rule": [
                {
                    "name": "id-cheb7de07",
                    "source": [
                        {
                            "context": "src"
                        }
                    ],
                    "target": [
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "identifier",
                            "variable": "CodeID",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Identifier"
                                }
                            ]
                        },
                        {
                            "context": "CodeID",
                            "contextType": "variable",
                            "element": "system",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "http://hl7.org/fhir/namingsystem-identifier-type"
                                }
                            ]
                        },
                        {
                            "context": "CodeID",
                            "contextType": "variable",
                            "element": "use",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "official"
                                }
                            ]
                        },
                        {
                            "context": "CodeID",
                            "contextType": "variable",
                            "element": "value",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "uuid"
                                }
                            ]
                        },
                        {
                            "context": "CodeID",
                            "contextType": "variable",
                            "element": "id",
                            "transform": "uuid"
                        }
                    ]
                },
                {
                    "name": "35bc6b82",
                    "source": [
                        {
                            "context": "src",
                            "element": "encounter",
                            "variable": "encounter"
                        }
                    ],
                    "target": [
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "encounter",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueId": "encounter"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "code-cheb7de07",
                    "source": [
                        {
                            "context": "src",
                            "element": "subject",
                            "variable": "subject"
                        }
                    ],
                    "target": [
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "subject",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueId": "subject"
                                }
                            ]
                        },
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "meta",
                            "variable": "newMeta",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Meta"
                                }
                            ]
                        },
                        {
                            "context": "newMeta",
                            "contextType": "variable",
                            "element": "profile",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "https://fhir.dk.swisstph-mis.ch/matchbox/fhir/StructureDefinition/cheobservation"
                                }
                            ]
                        },
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "code",
                            "variable": "concept",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "CodeableConcept"
                                }
                            ]
                        },
                        {
                            "context": "concept",
                            "contextType": "variable",
                            "element": "coding",
                            "variable": "coding",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Coding"
                                }
                            ]
                        },
                        {
                            "context": "coding",
                            "contextType": "variable",
                            "element": "system",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "https://fhir.dk.swisstph-mis.ch/matchbox/fhir/CodeSystem/che-custom-codes"
                                }
                            ]
                        },
                        {
                            "context": "coding",
                            "contextType": "variable",
                            "element": "code",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "CHE.B7.DE07"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "aae7a11d",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "itemtimestamp",
                            "condition": "linkId = 'timestamp'"
                        }
                    ],
                    "rule": [
                        {
                            "name": "7f22f29f",
                            "source": [
                                {
                                    "context": "itemtimestamp",
                                    "element": "answer",
                                    "listMode": "first",
                                    "variable": "atimestamp"
                                }
                            ],
                            "rule": [
                                {
                                    "name": "5af77f2c",
                                    "source": [
                                        {
                                            "context": "atimestamp",
                                            "element": "value",
                                            "variable": "val"
                                        }
                                    ],
                                    "target": [
                                        {
                                            "context": "tgt",
                                            "contextType": "variable",
                                            "element": "issued",
                                            "transform": "copy",
                                            "parameter": [
                                                {
                                                    "valueId": "val"
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "patient",
                    "source": [
                        {
                            "context": "src",
                            "element": "subject",
                            "variable": "subject"
                        }
                    ],
                    "target": [
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "subject",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueId": "subject"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "3dd9674b",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "listMode": "first",
                            "variable": "itm1",
                            "condition": "linkId = 'ds'"
                        }
                    ],
                    "rule": [
                        {
                            "name": "97792e44",
                            "source": [
                                {
                                    "context": "itm1",
                                    "element": "item",
                                    "listMode": "first",
                                    "variable": "item",
                                    "condition": "(linkId = 'CHE.B7.DE07') and answer.exists()"
                                }
                            ],
                            "rule": [
                                {
                                    "name": "bdab9370",
                                    "source": [
                                        {
                                            "context": "item",
                                            "element": "answer",
                                            "listMode": "first",
                                            "variable": "a"
                                        }
                                    ],
                                    "rule": [
                                        {
                                            "name": "final-cheb7de07",
                                            "source": [
                                                {
                                                    "context": "a",
                                                    "condition": "a.value = true"
                                                }
                                            ],
                                            "target": [
                                                {
                                                    "context": "tgt",
                                                    "contextType": "variable",
                                                    "element": "status",
                                                    "transform": "copy",
                                                    "parameter": [
                                                        {
                                                            "valueString": "final"
                                                        }
                                                    ]
                                                },
                                                {
                                                    "context": "tgt",
                                                    "contextType": "variable",
                                                    "element": "value",
                                                    "transform": "copy",
                                                    "parameter": [
                                                        {
                                                            "valueBoolean": true
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "name": "notfound-cheb7de07",
                                            "source": [
                                                {
                                                    "context": "a",
                                                    "condition": "a.value = false"
                                                }
                                            ],
                                            "target": [
                                                {
                                                    "context": "tgt",
                                                    "contextType": "variable",
                                                    "element": "status",
                                                    "transform": "copy",
                                                    "parameter": [
                                                        {
                                                            "valueString": "cancelled"
                                                        }
                                                    ]
                                                },
                                                {
                                                    "context": "tgt",
                                                    "contextType": "variable",
                                                    "element": "value",
                                                    "transform": "copy",
                                                    "parameter": [
                                                        {
                                                            "valueBoolean": false
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "name": "cheobservationcheb7de08",
            "typeMode": "none",
            "input": [
                {
                    "name": "src",
                    "mode": "source"
                },
                {
                    "name": "tgt",
                    "mode": "target"
                }
            ],
            "rule": [
                {
                    "name": "id-cheb7de08",
                    "source": [
                        {
                            "context": "src"
                        }
                    ],
                    "target": [
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "identifier",
                            "variable": "CodeID",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Identifier"
                                }
                            ]
                        },
                        {
                            "context": "CodeID",
                            "contextType": "variable",
                            "element": "system",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "http://hl7.org/fhir/namingsystem-identifier-type"
                                }
                            ]
                        },
                        {
                            "context": "CodeID",
                            "contextType": "variable",
                            "element": "use",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "official"
                                }
                            ]
                        },
                        {
                            "context": "CodeID",
                            "contextType": "variable",
                            "element": "value",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "uuid"
                                }
                            ]
                        },
                        {
                            "context": "CodeID",
                            "contextType": "variable",
                            "element": "id",
                            "transform": "uuid"
                        }
                    ]
                },
                {
                    "name": "35bc6b82",
                    "source": [
                        {
                            "context": "src",
                            "element": "encounter",
                            "variable": "encounter"
                        }
                    ],
                    "target": [
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "encounter",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueId": "encounter"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "code-cheb7de08",
                    "source": [
                        {
                            "context": "src",
                            "element": "subject",
                            "variable": "subject"
                        }
                    ],
                    "target": [
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "subject",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueId": "subject"
                                }
                            ]
                        },
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "meta",
                            "variable": "newMeta",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Meta"
                                }
                            ]
                        },
                        {
                            "context": "newMeta",
                            "contextType": "variable",
                            "element": "profile",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "https://fhir.dk.swisstph-mis.ch/matchbox/fhir/StructureDefinition/cheobservation"
                                }
                            ]
                        },
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "code",
                            "variable": "concept",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "CodeableConcept"
                                }
                            ]
                        },
                        {
                            "context": "concept",
                            "contextType": "variable",
                            "element": "coding",
                            "variable": "coding",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Coding"
                                }
                            ]
                        },
                        {
                            "context": "coding",
                            "contextType": "variable",
                            "element": "system",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "https://fhir.dk.swisstph-mis.ch/matchbox/fhir/CodeSystem/che-custom-codes"
                                }
                            ]
                        },
                        {
                            "context": "coding",
                            "contextType": "variable",
                            "element": "code",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "CHE.B7.DE08"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "aae7a11d",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "itemtimestamp",
                            "condition": "linkId = 'timestamp'"
                        }
                    ],
                    "rule": [
                        {
                            "name": "7f22f29f",
                            "source": [
                                {
                                    "context": "itemtimestamp",
                                    "element": "answer",
                                    "listMode": "first",
                                    "variable": "atimestamp"
                                }
                            ],
                            "rule": [
                                {
                                    "name": "5af77f2c",
                                    "source": [
                                        {
                                            "context": "atimestamp",
                                            "element": "value",
                                            "variable": "val"
                                        }
                                    ],
                                    "target": [
                                        {
                                            "context": "tgt",
                                            "contextType": "variable",
                                            "element": "issued",
                                            "transform": "copy",
                                            "parameter": [
                                                {
                                                    "valueId": "val"
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "patient",
                    "source": [
                        {
                            "context": "src",
                            "element": "subject",
                            "variable": "subject"
                        }
                    ],
                    "target": [
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "subject",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueId": "subject"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "1cb8e50b",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "listMode": "first",
                            "variable": "itm1",
                            "condition": "linkId = 'ds'"
                        }
                    ],
                    "rule": [
                        {
                            "name": "0c6e49a5",
                            "source": [
                                {
                                    "context": "itm1",
                                    "element": "item",
                                    "listMode": "first",
                                    "variable": "item",
                                    "condition": "(linkId = 'CHE.B7.DE08') and answer.exists()"
                                }
                            ],
                            "rule": [
                                {
                                    "name": "bdab9370",
                                    "source": [
                                        {
                                            "context": "item",
                                            "element": "answer",
                                            "listMode": "first",
                                            "variable": "a"
                                        }
                                    ],
                                    "rule": [
                                        {
                                            "name": "final-cheb7de08",
                                            "source": [
                                                {
                                                    "context": "a",
                                                    "condition": "a.value = true"
                                                }
                                            ],
                                            "target": [
                                                {
                                                    "context": "tgt",
                                                    "contextType": "variable",
                                                    "element": "status",
                                                    "transform": "copy",
                                                    "parameter": [
                                                        {
                                                            "valueString": "final"
                                                        }
                                                    ]
                                                },
                                                {
                                                    "context": "tgt",
                                                    "contextType": "variable",
                                                    "element": "value",
                                                    "transform": "copy",
                                                    "parameter": [
                                                        {
                                                            "valueBoolean": true
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "name": "notfound-cheb7de08",
                                            "source": [
                                                {
                                                    "context": "a",
                                                    "condition": "a.value = false"
                                                }
                                            ],
                                            "target": [
                                                {
                                                    "context": "tgt",
                                                    "contextType": "variable",
                                                    "element": "status",
                                                    "transform": "copy",
                                                    "parameter": [
                                                        {
                                                            "valueString": "cancelled"
                                                        }
                                                    ]
                                                },
                                                {
                                                    "context": "tgt",
                                                    "contextType": "variable",
                                                    "element": "value",
                                                    "transform": "copy",
                                                    "parameter": [
                                                        {
                                                            "valueBoolean": false
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "name": "cheobservationcheb7de09",
            "typeMode": "none",
            "input": [
                {
                    "name": "src",
                    "mode": "source"
                },
                {
                    "name": "tgt",
                    "mode": "target"
                }
            ],
            "rule": [
                {
                    "name": "id-cheb7de09",
                    "source": [
                        {
                            "context": "src"
                        }
                    ],
                    "target": [
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "identifier",
                            "variable": "CodeID",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Identifier"
                                }
                            ]
                        },
                        {
                            "context": "CodeID",
                            "contextType": "variable",
                            "element": "system",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "http://hl7.org/fhir/namingsystem-identifier-type"
                                }
                            ]
                        },
                        {
                            "context": "CodeID",
                            "contextType": "variable",
                            "element": "use",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "official"
                                }
                            ]
                        },
                        {
                            "context": "CodeID",
                            "contextType": "variable",
                            "element": "value",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "uuid"
                                }
                            ]
                        },
                        {
                            "context": "CodeID",
                            "contextType": "variable",
                            "element": "id",
                            "transform": "uuid"
                        }
                    ]
                },
                {
                    "name": "35bc6b82",
                    "source": [
                        {
                            "context": "src",
                            "element": "encounter",
                            "variable": "encounter"
                        }
                    ],
                    "target": [
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "encounter",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueId": "encounter"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "code-cheb7de09",
                    "source": [
                        {
                            "context": "src",
                            "element": "subject",
                            "variable": "subject"
                        }
                    ],
                    "target": [
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "subject",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueId": "subject"
                                }
                            ]
                        },
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "meta",
                            "variable": "newMeta",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Meta"
                                }
                            ]
                        },
                        {
                            "context": "newMeta",
                            "contextType": "variable",
                            "element": "profile",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "https://fhir.dk.swisstph-mis.ch/matchbox/fhir/StructureDefinition/cheobservation"
                                }
                            ]
                        },
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "code",
                            "variable": "concept",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "CodeableConcept"
                                }
                            ]
                        },
                        {
                            "context": "concept",
                            "contextType": "variable",
                            "element": "coding",
                            "variable": "coding",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Coding"
                                }
                            ]
                        },
                        {
                            "context": "coding",
                            "contextType": "variable",
                            "element": "system",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "https://fhir.dk.swisstph-mis.ch/matchbox/fhir/CodeSystem/che-custom-codes"
                                }
                            ]
                        },
                        {
                            "context": "coding",
                            "contextType": "variable",
                            "element": "code",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "CHE.B7.DE09"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "aae7a11d",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "itemtimestamp",
                            "condition": "linkId = 'timestamp'"
                        }
                    ],
                    "rule": [
                        {
                            "name": "7f22f29f",
                            "source": [
                                {
                                    "context": "itemtimestamp",
                                    "element": "answer",
                                    "listMode": "first",
                                    "variable": "atimestamp"
                                }
                            ],
                            "rule": [
                                {
                                    "name": "5af77f2c",
                                    "source": [
                                        {
                                            "context": "atimestamp",
                                            "element": "value",
                                            "variable": "val"
                                        }
                                    ],
                                    "target": [
                                        {
                                            "context": "tgt",
                                            "contextType": "variable",
                                            "element": "issued",
                                            "transform": "copy",
                                            "parameter": [
                                                {
                                                    "valueId": "val"
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "patient",
                    "source": [
                        {
                            "context": "src",
                            "element": "subject",
                            "variable": "subject"
                        }
                    ],
                    "target": [
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "subject",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueId": "subject"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "50c338e5",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "listMode": "first",
                            "variable": "itm1",
                            "condition": "linkId = 'ds'"
                        }
                    ],
                    "rule": [
                        {
                            "name": "95ee9897",
                            "source": [
                                {
                                    "context": "itm1",
                                    "element": "item",
                                    "listMode": "first",
                                    "variable": "item",
                                    "condition": "(linkId = 'CHE.B7.DE09') and answer.exists()"
                                }
                            ],
                            "rule": [
                                {
                                    "name": "bdab9370",
                                    "source": [
                                        {
                                            "context": "item",
                                            "element": "answer",
                                            "listMode": "first",
                                            "variable": "a"
                                        }
                                    ],
                                    "rule": [
                                        {
                                            "name": "final-cheb7de09",
                                            "source": [
                                                {
                                                    "context": "a",
                                                    "condition": "a.value = true"
                                                }
                                            ],
                                            "target": [
                                                {
                                                    "context": "tgt",
                                                    "contextType": "variable",
                                                    "element": "status",
                                                    "transform": "copy",
                                                    "parameter": [
                                                        {
                                                            "valueString": "final"
                                                        }
                                                    ]
                                                },
                                                {
                                                    "context": "tgt",
                                                    "contextType": "variable",
                                                    "element": "value",
                                                    "transform": "copy",
                                                    "parameter": [
                                                        {
                                                            "valueBoolean": true
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "name": "notfound-cheb7de09",
                                            "source": [
                                                {
                                                    "context": "a",
                                                    "condition": "a.value = false"
                                                }
                                            ],
                                            "target": [
                                                {
                                                    "context": "tgt",
                                                    "contextType": "variable",
                                                    "element": "status",
                                                    "transform": "copy",
                                                    "parameter": [
                                                        {
                                                            "valueString": "cancelled"
                                                        }
                                                    ]
                                                },
                                                {
                                                    "context": "tgt",
                                                    "contextType": "variable",
                                                    "element": "value",
                                                    "transform": "copy",
                                                    "parameter": [
                                                        {
                                                            "valueBoolean": false
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "name": "cheobservationcheb7de10",
            "typeMode": "none",
            "input": [
                {
                    "name": "src",
                    "mode": "source"
                },
                {
                    "name": "tgt",
                    "mode": "target"
                }
            ],
            "rule": [
                {
                    "name": "id-cheb7de10",
                    "source": [
                        {
                            "context": "src"
                        }
                    ],
                    "target": [
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "identifier",
                            "variable": "CodeID",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Identifier"
                                }
                            ]
                        },
                        {
                            "context": "CodeID",
                            "contextType": "variable",
                            "element": "system",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "http://hl7.org/fhir/namingsystem-identifier-type"
                                }
                            ]
                        },
                        {
                            "context": "CodeID",
                            "contextType": "variable",
                            "element": "use",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "official"
                                }
                            ]
                        },
                        {
                            "context": "CodeID",
                            "contextType": "variable",
                            "element": "value",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "uuid"
                                }
                            ]
                        },
                        {
                            "context": "CodeID",
                            "contextType": "variable",
                            "element": "id",
                            "transform": "uuid"
                        }
                    ]
                },
                {
                    "name": "35bc6b82",
                    "source": [
                        {
                            "context": "src",
                            "element": "encounter",
                            "variable": "encounter"
                        }
                    ],
                    "target": [
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "encounter",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueId": "encounter"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "code-cheb7de10",
                    "source": [
                        {
                            "context": "src",
                            "element": "subject",
                            "variable": "subject"
                        }
                    ],
                    "target": [
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "subject",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueId": "subject"
                                }
                            ]
                        },
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "meta",
                            "variable": "newMeta",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Meta"
                                }
                            ]
                        },
                        {
                            "context": "newMeta",
                            "contextType": "variable",
                            "element": "profile",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "https://fhir.dk.swisstph-mis.ch/matchbox/fhir/StructureDefinition/cheobservation"
                                }
                            ]
                        },
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "code",
                            "variable": "concept",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "CodeableConcept"
                                }
                            ]
                        },
                        {
                            "context": "concept",
                            "contextType": "variable",
                            "element": "coding",
                            "variable": "coding",
                            "transform": "create",
                            "parameter": [
                                {
                                    "valueString": "Coding"
                                }
                            ]
                        },
                        {
                            "context": "coding",
                            "contextType": "variable",
                            "element": "system",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "https://fhir.dk.swisstph-mis.ch/matchbox/fhir/CodeSystem/che-custom-codes"
                                }
                            ]
                        },
                        {
                            "context": "coding",
                            "contextType": "variable",
                            "element": "code",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueString": "CHE.B7.DE10"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "aae7a11d",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "variable": "itemtimestamp",
                            "condition": "linkId = 'timestamp'"
                        }
                    ],
                    "rule": [
                        {
                            "name": "7f22f29f",
                            "source": [
                                {
                                    "context": "itemtimestamp",
                                    "element": "answer",
                                    "listMode": "first",
                                    "variable": "atimestamp"
                                }
                            ],
                            "rule": [
                                {
                                    "name": "5af77f2c",
                                    "source": [
                                        {
                                            "context": "atimestamp",
                                            "element": "value",
                                            "variable": "val"
                                        }
                                    ],
                                    "target": [
                                        {
                                            "context": "tgt",
                                            "contextType": "variable",
                                            "element": "issued",
                                            "transform": "copy",
                                            "parameter": [
                                                {
                                                    "valueId": "val"
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "patient",
                    "source": [
                        {
                            "context": "src",
                            "element": "subject",
                            "variable": "subject"
                        }
                    ],
                    "target": [
                        {
                            "context": "tgt",
                            "contextType": "variable",
                            "element": "subject",
                            "transform": "copy",
                            "parameter": [
                                {
                                    "valueId": "subject"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "ad934662",
                    "source": [
                        {
                            "context": "src",
                            "element": "item",
                            "listMode": "first",
                            "variable": "itm1",
                            "condition": "linkId = 'ds'"
                        }
                    ],
                    "rule": [
                        {
                            "name": "88b2075a",
                            "source": [
                                {
                                    "context": "itm1",
                                    "element": "item",
                                    "listMode": "first",
                                    "variable": "item",
                                    "condition": "(linkId = 'CHE.B7.DE10') and answer.exists()"
                                }
                            ],
                            "rule": [
                                {
                                    "name": "7c587a4b",
                                    "source": [
                                        {
                                            "context": "item",
                                            "element": "answer",
                                            "listMode": "first",
                                            "variable": "a"
                                        }
                                    ],
                                    "rule": [
                                        {
                                            "name": "4ca9082e",
                                            "source": [
                                                {
                                                    "context": "a",
                                                    "element": "value",
                                                    "variable": "val"
                                                }
                                            ],
                                            "rule": [
                                                {
                                                    "name": "8ab1d7a5",
                                                    "source": [
                                                        {
                                                            "context": "val",
                                                            "condition": "val.code = 'none'"
                                                        }
                                                    ],
                                                    "target": [
                                                        {
                                                            "context": "tgt",
                                                            "contextType": "variable",
                                                            "element": "status",
                                                            "transform": "copy",
                                                            "parameter": [
                                                                {
                                                                    "valueString": "cancelled"
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    "name": "a1050460",
                                                    "source": [
                                                        {
                                                            "context": "val",
                                                            "condition": "val.code != 'none'"
                                                        }
                                                    ],
                                                    "target": [
                                                        {
                                                            "context": "tgt",
                                                            "contextType": "variable",
                                                            "element": "value",
                                                            "variable": "cc",
                                                            "transform": "create",
                                                            "parameter": [
                                                                {
                                                                    "valueString": "CodeableConcept"
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "context": "cc",
                                                            "contextType": "variable",
                                                            "element": "coding",
                                                            "transform": "copy",
                                                            "parameter": [
                                                                {
                                                                    "valueId": "val"
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            "context": "tgt",
                                                            "contextType": "variable",
                                                            "element": "status",
                                                            "transform": "copy",
                                                            "parameter": [
                                                                {
                                                                    "valueString": "final"
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        }
    ]
}