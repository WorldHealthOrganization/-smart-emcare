map 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/StructureMap/emcare-observation-emcare.b18-21.signs.2m.m' = 'emcare-observation-emcare.b18-21.signs.2m.m'

// emcareb1821signs2mm:https://fhir.dk.swisstph-mis.ch/matchbox/fhir/Questionnaire/emcare.b18-21.signs.2m.m
uses 'http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaireresponse' alias 'questionnaireResponse' as source
// Bundle are require where there is multiple ressource to be mapped
uses 'http://hl7.org/fhir/StructureDefinition/Bundle' alias 'bundle' as target
// target that will be inserted in the bundle
uses 'http://hl7.org/fhir/StructureDefinition/Observation' alias 'Observation' as target

group bundleMapping(source src : questionnaireResponse, target bundle : Bundle) {
    src -> bundle.id = uuid() 'id';
    src -> bundle.type = 'batch' 'type';
     src -> uuid() as emcareb20s1de01id,uuid() as emcareb21s1de01id,uuid() as emcareb18s1de02id,uuid() as emcareb18s2de01id,uuid() as emcareb18s2de04id,uuid() as emcareb18s2de05id,uuid() as emcareb18s2de06id,uuid() as emcareb18s2de07id,uuid() as emcareb18s2de08id,uuid() as emcareb18s2de12id,uuid() as emcareb18s2de13id,uuid() as emcareb19s2de01id,uuid() as emcareb19s2de02id,uuid() as emcareb19s2de03id,uuid() as emcareb20s2de01id,uuid() as emcareb20s2de02id,uuid() as emcareb20s2de06id,uuid() as emcareb21s2de01id,uuid() as emcareb21s2de05id,uuid() as emcareb21s2de08id,uuid() as emcareb21s2de09id,uuid() as emcareb21s2de12id,uuid() as emcareb21s2de27id,uuid() as emcareb21s2de30id,uuid() as emcareb21s2de31id then {
        src -> 
            bundle.entry as entry,
            entry.fullUrl = append("urn:uuid:",emcareb20s1de01id), 
            entry.request as request, 
            request.method = "PUT", 
            request.url = append("None/", emcareb20s1de01id),
            entry.resource = create('Observation') as tgt then {src.item first as item  where linkId =  'emcareb20s1de01' -> item.answer as a then SetObservationemcareb20s1de01(src, a, tgt , emcareb20s1de01id) 'obs-rule';}  'emcareb20s1de01grouprule';
            
        src -> 
            bundle.entry as entry,
            entry.fullUrl = append("urn:uuid:",emcareb21s1de01id), 
            entry.request as request, 
            request.method = "PUT", 
            request.url = append("None/", emcareb21s1de01id),
            entry.resource = create('Observation') as tgt then {src.item first as item  where linkId =  'emcareb21s1de01' -> item.answer as a then SetObservationemcareb21s1de01(src, a, tgt , emcareb21s1de01id) 'obs-rule';}  'emcareb21s1de01grouprule';
            
        src -> 
            bundle.entry as entry,
            entry.fullUrl = append("urn:uuid:",emcareb18s1de02id), 
            entry.request as request, 
            request.method = "PUT", 
            request.url = append("None/", emcareb18s1de02id),
            entry.resource = create('Observation') as tgt then {src.item first as item  where linkId =  'emcareb18s1de02' -> item.answer as a then SetObservationemcareb18s1de02(src, a, tgt , emcareb18s1de02id) 'obs-rule';}  'emcareb18s1de02grouprule';
            
        src -> 
            bundle.entry as entry,
            entry.fullUrl = append("urn:uuid:",emcareb18s2de01id), 
            entry.request as request, 
            request.method = "PUT", 
            request.url = append("None/", emcareb18s2de01id),
            entry.resource = create('Observation') as tgt then {src.item first as item  where linkId =  'emcareb18s2de01' -> item.answer as a then SetObservationemcareb18s2de01(src, a, tgt , emcareb18s2de01id) 'obs-rule';}  'emcareb18s2de01grouprule';
            
        src -> 
            bundle.entry as entry,
            entry.fullUrl = append("urn:uuid:",emcareb18s2de04id), 
            entry.request as request, 
            request.method = "PUT", 
            request.url = append("None/", emcareb18s2de04id),
            entry.resource = create('Observation') as tgt then {src.item first as item  where linkId =  'emcareb18s2de04' -> item.answer as a then SetObservationemcareb18s2de04(src, a, tgt , emcareb18s2de04id) 'obs-rule';}  'emcareb18s2de04grouprule';
            
        src -> 
            bundle.entry as entry,
            entry.fullUrl = append("urn:uuid:",emcareb18s2de05id), 
            entry.request as request, 
            request.method = "PUT", 
            request.url = append("None/", emcareb18s2de05id),
            entry.resource = create('Observation') as tgt then {src.item first as item  where linkId =  'emcareb18s2de05' -> item.answer as a then SetObservationemcareb18s2de05(src, a, tgt , emcareb18s2de05id) 'obs-rule';}  'emcareb18s2de05grouprule';
            
        src -> 
            bundle.entry as entry,
            entry.fullUrl = append("urn:uuid:",emcareb18s2de06id), 
            entry.request as request, 
            request.method = "PUT", 
            request.url = append("None/", emcareb18s2de06id),
            entry.resource = create('Observation') as tgt then {src.item first as item  where linkId =  'emcareb18s2de06' -> item.answer as a then SetObservationemcareb18s2de06(src, a, tgt , emcareb18s2de06id) 'obs-rule';}  'emcareb18s2de06grouprule';
            
        src -> 
            bundle.entry as entry,
            entry.fullUrl = append("urn:uuid:",emcareb18s2de07id), 
            entry.request as request, 
            request.method = "PUT", 
            request.url = append("None/", emcareb18s2de07id),
            entry.resource = create('Observation') as tgt then {src.item first as item  where linkId =  'emcareb18s2de07' -> item.answer as a then SetObservationemcareb18s2de07(src, a, tgt , emcareb18s2de07id) 'obs-rule';}  'emcareb18s2de07grouprule';
            
        src -> 
            bundle.entry as entry,
            entry.fullUrl = append("urn:uuid:",emcareb18s2de08id), 
            entry.request as request, 
            request.method = "PUT", 
            request.url = append("None/", emcareb18s2de08id),
            entry.resource = create('Observation') as tgt then {src.item first as item  where linkId =  'emcareb18s2de08' -> item.answer as a then SetObservationemcareb18s2de08(src, a, tgt , emcareb18s2de08id) 'obs-rule';}  'emcareb18s2de08grouprule';
            
        src -> 
            bundle.entry as entry,
            entry.fullUrl = append("urn:uuid:",emcareb18s2de12id), 
            entry.request as request, 
            request.method = "PUT", 
            request.url = append("None/", emcareb18s2de12id),
            entry.resource = create('Observation') as tgt then {src.item first as item  where linkId =  'emcareb18s2de12' -> item.answer as a then SetObservationemcareb18s2de12(src, a, tgt , emcareb18s2de12id) 'obs-rule';}  'emcareb18s2de12grouprule';
            
        src -> 
            bundle.entry as entry,
            entry.fullUrl = append("urn:uuid:",emcareb18s2de13id), 
            entry.request as request, 
            request.method = "PUT", 
            request.url = append("None/", emcareb18s2de13id),
            entry.resource = create('Observation') as tgt then {src.item first as item  where linkId =  'emcareb18s2de13' -> item.answer as a then SetObservationemcareb18s2de13(src, a, tgt , emcareb18s2de13id) 'obs-rule';}  'emcareb18s2de13grouprule';
            
        src -> 
            bundle.entry as entry,
            entry.fullUrl = append("urn:uuid:",emcareb19s2de01id), 
            entry.request as request, 
            request.method = "PUT", 
            request.url = append("None/", emcareb19s2de01id),
            entry.resource = create('Observation') as tgt then {src.item first as item  where linkId =  'emcareb19s2de01' -> item.answer as a then SetObservationemcareb19s2de01(src, a, tgt , emcareb19s2de01id) 'obs-rule';}  'emcareb19s2de01grouprule';
            
        src -> 
            bundle.entry as entry,
            entry.fullUrl = append("urn:uuid:",emcareb19s2de02id), 
            entry.request as request, 
            request.method = "PUT", 
            request.url = append("None/", emcareb19s2de02id),
            entry.resource = create('Observation') as tgt then {src.item first as item  where linkId =  'emcareb19s2de02' -> item.answer as a then SetObservationemcareb19s2de02(src, a, tgt , emcareb19s2de02id) 'obs-rule';}  'emcareb19s2de02grouprule';
            
        src -> 
            bundle.entry as entry,
            entry.fullUrl = append("urn:uuid:",emcareb19s2de03id), 
            entry.request as request, 
            request.method = "PUT", 
            request.url = append("None/", emcareb19s2de03id),
            entry.resource = create('Observation') as tgt then {src.item first as item  where linkId =  'emcareb19s2de03' -> item.answer as a then SetObservationemcareb19s2de03(src, a, tgt , emcareb19s2de03id) 'obs-rule';}  'emcareb19s2de03grouprule';
            
        src -> 
            bundle.entry as entry,
            entry.fullUrl = append("urn:uuid:",emcareb20s2de01id), 
            entry.request as request, 
            request.method = "PUT", 
            request.url = append("None/", emcareb20s2de01id),
            entry.resource = create('Observation') as tgt then {src.item first as item  where linkId =  'emcareb20s2de01' -> item.answer as a then SetObservationemcareb20s2de01(src, a, tgt , emcareb20s2de01id) 'obs-rule';}  'emcareb20s2de01grouprule';
            
        src -> 
            bundle.entry as entry,
            entry.fullUrl = append("urn:uuid:",emcareb20s2de02id), 
            entry.request as request, 
            request.method = "PUT", 
            request.url = append("None/", emcareb20s2de02id),
            entry.resource = create('Observation') as tgt then {src.item first as item  where linkId =  'emcareb20s2de02' -> item.answer as a then SetObservationemcareb20s2de02(src, a, tgt , emcareb20s2de02id) 'obs-rule';}  'emcareb20s2de02grouprule';
            
        src -> 
            bundle.entry as entry,
            entry.fullUrl = append("urn:uuid:",emcareb20s2de06id), 
            entry.request as request, 
            request.method = "PUT", 
            request.url = append("None/", emcareb20s2de06id),
            entry.resource = create('Observation') as tgt then {src.item first as item  where linkId =  'emcareb20s2de06' -> item.answer as a then SetObservationemcareb20s2de06(src, a, tgt , emcareb20s2de06id) 'obs-rule';}  'emcareb20s2de06grouprule';
            
        src -> 
            bundle.entry as entry,
            entry.fullUrl = append("urn:uuid:",emcareb21s2de01id), 
            entry.request as request, 
            request.method = "PUT", 
            request.url = append("None/", emcareb21s2de01id),
            entry.resource = create('Observation') as tgt then {src.item first as item  where linkId =  'emcareb21s2de01' -> item.answer as a then SetObservationemcareb21s2de01(src, a, tgt , emcareb21s2de01id) 'obs-rule';}  'emcareb21s2de01grouprule';
            
        src -> 
            bundle.entry as entry,
            entry.fullUrl = append("urn:uuid:",emcareb21s2de05id), 
            entry.request as request, 
            request.method = "PUT", 
            request.url = append("None/", emcareb21s2de05id),
            entry.resource = create('Observation') as tgt then {src.item first as item  where linkId =  'emcareb21s2de05' -> item.answer as a then SetObservationemcareb21s2de05(src, a, tgt , emcareb21s2de05id) 'obs-rule';}  'emcareb21s2de05grouprule';
            
        src -> 
            bundle.entry as entry,
            entry.fullUrl = append("urn:uuid:",emcareb21s2de08id), 
            entry.request as request, 
            request.method = "PUT", 
            request.url = append("None/", emcareb21s2de08id),
            entry.resource = create('Observation') as tgt then {src.item first as item  where linkId =  'emcareb21s2de08' -> item.answer as a then SetObservationemcareb21s2de08(src, a, tgt , emcareb21s2de08id) 'obs-rule';}  'emcareb21s2de08grouprule';
            
        src -> 
            bundle.entry as entry,
            entry.fullUrl = append("urn:uuid:",emcareb21s2de09id), 
            entry.request as request, 
            request.method = "PUT", 
            request.url = append("None/", emcareb21s2de09id),
            entry.resource = create('Observation') as tgt then {src.item first as item  where linkId =  'emcareb21s2de09' -> item.answer as a then SetObservationemcareb21s2de09(src, a, tgt , emcareb21s2de09id) 'obs-rule';}  'emcareb21s2de09grouprule';
            
        src -> 
            bundle.entry as entry,
            entry.fullUrl = append("urn:uuid:",emcareb21s2de12id), 
            entry.request as request, 
            request.method = "PUT", 
            request.url = append("None/", emcareb21s2de12id),
            entry.resource = create('Observation') as tgt then {src.item first as item  where linkId =  'emcareb21s2de12' -> item.answer as a then SetObservationemcareb21s2de12(src, a, tgt , emcareb21s2de12id) 'obs-rule';}  'emcareb21s2de12grouprule';
            
        src -> 
            bundle.entry as entry,
            entry.fullUrl = append("urn:uuid:",emcareb21s2de27id), 
            entry.request as request, 
            request.method = "PUT", 
            request.url = append("None/", emcareb21s2de27id),
            entry.resource = create('Observation') as tgt then {src.item first as item  where linkId =  'emcareb21s2de27' -> item.answer as a then SetObservationemcareb21s2de27(src, a, tgt , emcareb21s2de27id) 'obs-rule';}  'emcareb21s2de27grouprule';
            
        src -> 
            bundle.entry as entry,
            entry.fullUrl = append("urn:uuid:",emcareb21s2de30id), 
            entry.request as request, 
            request.method = "PUT", 
            request.url = append("None/", emcareb21s2de30id),
            entry.resource = create('Observation') as tgt then {src.item first as item  where linkId =  'emcareb21s2de30' -> item.answer as a then SetObservationemcareb21s2de30(src, a, tgt , emcareb21s2de30id) 'obs-rule';}  'emcareb21s2de30grouprule';
            
        src -> 
            bundle.entry as entry,
            entry.fullUrl = append("urn:uuid:",emcareb21s2de31id), 
            entry.request as request, 
            request.method = "PUT", 
            request.url = append("None/", emcareb21s2de31id),
            entry.resource = create('Observation') as tgt then {src.item first as item  where linkId =  'emcareb21s2de31' -> item.answer as a then SetObservationemcareb21s2de31(src, a, tgt , emcareb21s2de31id) 'obs-rule';}  'emcareb21s2de31grouprule';
            	}'gen-ids';
}


group SetObservationemcareb20s1de01(source src, source a, target tgt, source oid ){
    oid ->  tgt.id = oid,
            tgt.identifier = create('Identifier') as CodeID, 
            CodeID.system = 'http://hl7.org/fhir/namingsystem-identifier-type',
            CodeID.use =  'official',
            CodeID.value = 'uuid',
            CodeID.id = oid
            'set-id';

    src -> tgt.basedOn = src.basedOn,
        tgt.encounter = src.encounter,
        tgt. subject = src. subject,
        tgt.meta = create('Meta') as newMeta, newMeta.profile = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/StructureDefinition/emcareb20s1de01',
        tgt.code = create('CodeableConcept') as concept, 
            concept.system = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/CodeSystem/emcare-custom-codes',
            concept.code = 'EmCare.B20S1.DE01' 'set-code';  
    src.item as item where linkId  = 'timestamp', item.answer as a -> tgt.issued = a 'EmCare.A.DE08-main';       

    a  where a.value = 'yes' -> tgt.status = 'final' 'set-final';
    a  where a.value = 'no' -> tgt.status = 'cancelled' 'set-nofound'; 
    
}
    


group SetObservationemcareb21s1de01(source src, source a, target tgt, source oid ){
    oid ->  tgt.id = oid,
            tgt.identifier = create('Identifier') as CodeID, 
            CodeID.system = 'http://hl7.org/fhir/namingsystem-identifier-type',
            CodeID.use =  'official',
            CodeID.value = 'uuid',
            CodeID.id = oid
            'set-id';

    src -> tgt.basedOn = src.basedOn,
        tgt.encounter = src.encounter,
        tgt. subject = src. subject,
        tgt.meta = create('Meta') as newMeta, newMeta.profile = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/StructureDefinition/emcareb21s1de01',
        tgt.code = create('CodeableConcept') as concept, 
            concept.system = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/CodeSystem/emcare-custom-codes',
            concept.code = 'EmCare.B21S1.DE01' 'set-code';  
    src.item as item where linkId  = 'timestamp', item.answer as a -> tgt.issued = a 'EmCare.A.DE08-main';       

    a  where a.value = 'yes' -> tgt.status = 'final' 'set-final';
    a  where a.value = 'no' -> tgt.status = 'cancelled' 'set-nofound'; 
    
}
    


group SetObservationemcareb18s1de02(source src, source a, target tgt, source oid ){

    oid ->  tgt.id = oid,
            tgt.identifier = create('Identifier') as CodeID, 
            CodeID.system = 'http://hl7.org/fhir/namingsystem-identifier-type',
            CodeID.use =  'official',
            CodeID.value = 'uuid',
            CodeID.id = oid
            'set-id';
    src -> 
        tgt.basedOn = src.basedOn,
        tgt.encounter = src.encounter,
        tgt. subject = src. subject,
        tgt.meta = create('Meta') as newMeta, newMeta.profile = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/StructureDefinition/emcareb18s1de02',
        tgt.status = 'final',
        tgt.code = create('CodeableConcept') as concept, 
            concept.system = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/CodeSystem/emcare-custom-codes',
            concept.code = 'EmCare.B18S1.DE02' 'set-code';  
    src.item as item where linkId  = 'timestamp', item.answer as a -> tgt.issued = a 'EmCare.A.DE08-main';       

    a -> tgt.value = a 'set-value'; 
}
    


group SetObservationemcareb18s2de01(source src, source a, target tgt, source oid ){

    oid ->  tgt.id = oid,
            tgt.identifier = create('Identifier') as CodeID, 
            CodeID.system = 'http://hl7.org/fhir/namingsystem-identifier-type',
            CodeID.use =  'official',
            CodeID.value = 'uuid',
            CodeID.id = oid
            'set-id';
    src -> 
        tgt.basedOn = src.basedOn,
        tgt.encounter = src.encounter,
        tgt. subject = src. subject,
        tgt.meta = create('Meta') as newMeta, newMeta.profile = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/StructureDefinition/emcareb18s2de01',
        tgt.status = 'final',
        tgt.code = create('CodeableConcept') as concept, 
            concept.system = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/CodeSystem/emcare-custom-codes',
            concept.code = 'EmCare.B18S2.DE01' 'set-code';  
    src.item as item where linkId  = 'timestamp', item.answer as a -> tgt.issued = a 'EmCare.A.DE08-main';       

    a -> tgt.value = a 'set-value'; 
}
    


group SetObservationemcareb18s2de04(source src, source a, target tgt, source oid ){

    oid ->  tgt.id = oid,
            tgt.identifier = create('Identifier') as CodeID, 
            CodeID.system = 'http://hl7.org/fhir/namingsystem-identifier-type',
            CodeID.use =  'official',
            CodeID.value = 'uuid',
            CodeID.id = oid
            'set-id';
    src -> 
        tgt.basedOn = src.basedOn,
        tgt.encounter = src.encounter,
        tgt. subject = src. subject,
        tgt.meta = create('Meta') as newMeta, newMeta.profile = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/StructureDefinition/emcareb18s2de04',
        tgt.status = 'final',
        tgt.code = create('CodeableConcept') as concept, 
            concept.system = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/CodeSystem/emcare-custom-codes',
            concept.code = 'EmCare.B18S2.DE04' 'set-code';  
    src.item as item where linkId  = 'timestamp', item.answer as a -> tgt.issued = a 'EmCare.A.DE08-main';       

    a -> tgt.value = a 'set-value'; 
}
    


group SetObservationemcareb18s2de05(source src, source a, target tgt, source oid ){

    oid ->  tgt.id = oid,
            tgt.identifier = create('Identifier') as CodeID, 
            CodeID.system = 'http://hl7.org/fhir/namingsystem-identifier-type',
            CodeID.use =  'official',
            CodeID.value = 'uuid',
            CodeID.id = oid
            'set-id';
    src -> 
        tgt.basedOn = src.basedOn,
        tgt.encounter = src.encounter,
        tgt. subject = src. subject,
        tgt.meta = create('Meta') as newMeta, newMeta.profile = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/StructureDefinition/emcareb18s2de05',
        tgt.status = 'final',
        tgt.code = create('CodeableConcept') as concept, 
            concept.system = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/CodeSystem/emcare-custom-codes',
            concept.code = 'EmCare.B18S2.DE05' 'set-code';  
    src.item as item where linkId  = 'timestamp', item.answer as a -> tgt.issued = a 'EmCare.A.DE08-main';       

    a -> tgt.value = a 'set-value'; 
}
    


group SetObservationemcareb18s2de06(source src, source a, target tgt, source oid ){
    oid ->  tgt.id = oid,
            tgt.identifier = create('Identifier') as CodeID, 
            CodeID.system = 'http://hl7.org/fhir/namingsystem-identifier-type',
            CodeID.use =  'official',
            CodeID.value = 'uuid',
            CodeID.id = oid
            'set-id';

    src -> tgt.basedOn = src.basedOn,
        tgt.encounter = src.encounter,
        tgt. subject = src. subject,
        tgt.meta = create('Meta') as newMeta, newMeta.profile = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/StructureDefinition/emcareb18s2de06',
        tgt.code = create('CodeableConcept') as concept, 
            concept.system = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/CodeSystem/emcare-custom-codes',
            concept.code = 'EmCare.B18S2.DE06' 'set-code';  
    src.item as item where linkId  = 'timestamp', item.answer as a -> tgt.issued = a 'EmCare.A.DE08-main';       

    a  where a.value = 'yes' -> tgt.status = 'final' 'set-final';
    a  where a.value = 'no' -> tgt.status = 'cancelled' 'set-nofound'; 
    
}
    


group SetObservationemcareb18s2de07(source src, source a, target tgt, source oid ){
    oid ->  tgt.id = oid,
            tgt.identifier = create('Identifier') as CodeID, 
            CodeID.system = 'http://hl7.org/fhir/namingsystem-identifier-type',
            CodeID.use =  'official',
            CodeID.value = 'uuid',
            CodeID.id = oid
            'set-id';

    src -> tgt.basedOn = src.basedOn,
        tgt.encounter = src.encounter,
        tgt. subject = src. subject,
        tgt.meta = create('Meta') as newMeta, newMeta.profile = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/StructureDefinition/emcareb18s2de07',
        tgt.code = create('CodeableConcept') as concept, 
            concept.system = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/CodeSystem/emcare-custom-codes',
            concept.code = 'EmCare.B18S2.DE07' 'set-code';  
    src.item as item where linkId  = 'timestamp', item.answer as a -> tgt.issued = a 'EmCare.A.DE08-main';       

    a  where a.value = 'yes' -> tgt.status = 'final' 'set-final';
    a  where a.value = 'no' -> tgt.status = 'cancelled' 'set-nofound'; 
    
}
    


group SetObservationemcareb18s2de08(source src, source a, target tgt, source oid ){

    oid ->  tgt.id = oid,
            tgt.identifier = create('Identifier') as CodeID, 
            CodeID.system = 'http://hl7.org/fhir/namingsystem-identifier-type',
            CodeID.use =  'official',
            CodeID.value = 'uuid',
            CodeID.id = oid
            'set-id';
    src -> 
        tgt.basedOn = src.basedOn,
        tgt.encounter = src.encounter,
        tgt. subject = src. subject,
        tgt.meta = create('Meta') as newMeta, newMeta.profile = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/StructureDefinition/emcareb18s2de08',
        tgt.status = 'final',
        tgt.code = create('CodeableConcept') as concept, 
            concept.system = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/CodeSystem/emcare-custom-codes',
            concept.code = 'EmCare.B18S2.DE08' 'set-code';  
    src.item as item where linkId  = 'timestamp', item.answer as a -> tgt.issued = a 'EmCare.A.DE08-main';       

    a -> tgt.value = a 'set-value'; 
}
    


group SetObservationemcareb18s2de12(source src, source a, target tgt, source oid ){
    oid ->  tgt.id = oid,
            tgt.identifier = create('Identifier') as CodeID, 
            CodeID.system = 'http://hl7.org/fhir/namingsystem-identifier-type',
            CodeID.use =  'official',
            CodeID.value = 'uuid',
            CodeID.id = oid
            'set-id';

    src -> tgt.basedOn = src.basedOn,
        tgt.encounter = src.encounter,
        tgt. subject = src. subject,
        tgt.meta = create('Meta') as newMeta, newMeta.profile = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/StructureDefinition/emcareb18s2de12',
        tgt.code = create('CodeableConcept') as concept, 
            concept.system = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/CodeSystem/emcare-custom-codes',
            concept.code = 'EmCare.B18S2.DE12' 'set-code';  
    src.item as item where linkId  = 'timestamp', item.answer as a -> tgt.issued = a 'EmCare.A.DE08-main';       

    a  where a.value = 'yes' -> tgt.status = 'final' 'set-final';
    a  where a.value = 'no' -> tgt.status = 'cancelled' 'set-nofound'; 
    
}
    


group SetObservationemcareb18s2de13(source src, source a, target tgt, source oid ){
    oid ->  tgt.id = oid,
            tgt.identifier = create('Identifier') as CodeID, 
            CodeID.system = 'http://hl7.org/fhir/namingsystem-identifier-type',
            CodeID.use =  'official',
            CodeID.value = 'uuid',
            CodeID.id = oid
            'set-id';

    src -> tgt.basedOn = src.basedOn,
        tgt.encounter = src.encounter,
        tgt. subject = src. subject,
        tgt.meta = create('Meta') as newMeta, newMeta.profile = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/StructureDefinition/emcareb18s2de13',
        tgt.code = create('CodeableConcept') as concept, 
            concept.system = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/CodeSystem/emcare-custom-codes',
            concept.code = 'EmCare.B18S2.DE13' 'set-code';  
    src.item as item where linkId  = 'timestamp', item.answer as a -> tgt.issued = a 'EmCare.A.DE08-main';       

    a  where a.value = 'yes' -> tgt.status = 'final' 'set-final';
    a  where a.value = 'no' -> tgt.status = 'cancelled' 'set-nofound'; 
    
}
    


group SetObservationemcareb19s2de01(source src, source a, target tgt, source oid ){
    oid ->  tgt.id = oid,
            tgt.identifier = create('Identifier') as CodeID, 
            CodeID.system = 'http://hl7.org/fhir/namingsystem-identifier-type',
            CodeID.use =  'official',
            CodeID.value = 'uuid',
            CodeID.id = oid
            'set-id';

    src -> tgt.basedOn = src.basedOn,
        tgt.encounter = src.encounter,
        tgt. subject = src. subject,
        tgt.meta = create('Meta') as newMeta, newMeta.profile = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/StructureDefinition/emcareb19s2de01',
        tgt.code = create('CodeableConcept') as concept, 
            concept.system = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/CodeSystem/emcare-custom-codes',
            concept.code = 'EmCare.B19S2.DE01' 'set-code';  
    src.item as item where linkId  = 'timestamp', item.answer as a -> tgt.issued = a 'EmCare.A.DE08-main';       

    a  where a.value = 'yes' -> tgt.status = 'final' 'set-final';
    a  where a.value = 'no' -> tgt.status = 'cancelled' 'set-nofound'; 
    
}
    


group SetObservationemcareb19s2de02(source src, source a, target tgt, source oid ){
    oid ->  tgt.id = oid,
            tgt.identifier = create('Identifier') as CodeID, 
            CodeID.system = 'http://hl7.org/fhir/namingsystem-identifier-type',
            CodeID.use =  'official',
            CodeID.value = 'uuid',
            CodeID.id = oid
            'set-id';

    src -> tgt.basedOn = src.basedOn,
        tgt.encounter = src.encounter,
        tgt. subject = src. subject,
        tgt.meta = create('Meta') as newMeta, newMeta.profile = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/StructureDefinition/emcareb19s2de02',
        tgt.code = create('CodeableConcept') as concept, 
            concept.system = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/CodeSystem/emcare-custom-codes',
            concept.code = 'EmCare.B19S2.DE02' 'set-code';  
    src.item as item where linkId  = 'timestamp', item.answer as a -> tgt.issued = a 'EmCare.A.DE08-main';       

    a  where a.value = 'yes' -> tgt.status = 'final' 'set-final';
    a  where a.value = 'no' -> tgt.status = 'cancelled' 'set-nofound'; 
    
}
    


group SetObservationemcareb19s2de03(source src, source a, target tgt, source oid ){
    oid ->  tgt.id = oid,
            tgt.identifier = create('Identifier') as CodeID, 
            CodeID.system = 'http://hl7.org/fhir/namingsystem-identifier-type',
            CodeID.use =  'official',
            CodeID.value = 'uuid',
            CodeID.id = oid
            'set-id';

    src -> tgt.basedOn = src.basedOn,
        tgt.encounter = src.encounter,
        tgt. subject = src. subject,
        tgt.meta = create('Meta') as newMeta, newMeta.profile = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/StructureDefinition/emcareb19s2de03',
        tgt.code = create('CodeableConcept') as concept, 
            concept.system = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/CodeSystem/emcare-custom-codes',
            concept.code = 'EmCare.B19S2.DE03' 'set-code';  
    src.item as item where linkId  = 'timestamp', item.answer as a -> tgt.issued = a 'EmCare.A.DE08-main';       

    a  where a.value = 'yes' -> tgt.status = 'final' 'set-final';
    a  where a.value = 'no' -> tgt.status = 'cancelled' 'set-nofound'; 
    
}
    


group SetObservationemcareb20s2de01(source src, source a, target tgt, source oid ){
    oid ->  tgt.id = oid,
            tgt.identifier = create('Identifier') as CodeID, 
            CodeID.system = 'http://hl7.org/fhir/namingsystem-identifier-type',
            CodeID.use =  'official',
            CodeID.value = 'uuid',
            CodeID.id = oid
            'set-id';

    src -> tgt.basedOn = src.basedOn,
        tgt.encounter = src.encounter,
        tgt. subject = src. subject,
        tgt.meta = create('Meta') as newMeta, newMeta.profile = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/StructureDefinition/emcareb20s2de01',
        tgt.code = create('CodeableConcept') as concept, 
            concept.system = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/CodeSystem/emcare-custom-codes',
            concept.code = 'EmCare.B20S2.DE01' 'set-code';  
    src.item as item where linkId  = 'timestamp', item.answer as a -> tgt.issued = a 'EmCare.A.DE08-main';       

    a  where a.value = 'yes' -> tgt.status = 'final' 'set-final';
    a  where a.value = 'no' -> tgt.status = 'cancelled' 'set-nofound'; 
    
}
    


group SetObservationemcareb20s2de02(source src, source a, target tgt, source oid ){

    oid ->  tgt.id = oid,
            tgt.identifier = create('Identifier') as CodeID, 
            CodeID.system = 'http://hl7.org/fhir/namingsystem-identifier-type',
            CodeID.use =  'official',
            CodeID.value = 'uuid',
            CodeID.id = oid
            'set-id';
    src -> 
        tgt.basedOn = src.basedOn,
        tgt.encounter = src.encounter,
        tgt. subject = src. subject,
        tgt.meta = create('Meta') as newMeta, newMeta.profile = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/StructureDefinition/emcareb20s2de02',
        tgt.status = 'final',
        tgt.code = create('CodeableConcept') as concept, 
            concept.system = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/CodeSystem/emcare-custom-codes',
            concept.code = 'EmCare.B20S2.DE02' 'set-code';  
    src.item as item where linkId  = 'timestamp', item.answer as a -> tgt.issued = a 'EmCare.A.DE08-main';       

    a -> tgt.value = a 'set-value'; 
}
    


group SetObservationemcareb20s2de06(source src, source a, target tgt, source oid ){
    oid ->  tgt.id = oid,
            tgt.identifier = create('Identifier') as CodeID, 
            CodeID.system = 'http://hl7.org/fhir/namingsystem-identifier-type',
            CodeID.use =  'official',
            CodeID.value = 'uuid',
            CodeID.id = oid
            'set-id';

    src -> tgt.basedOn = src.basedOn,
        tgt.encounter = src.encounter,
        tgt. subject = src. subject,
        tgt.meta = create('Meta') as newMeta, newMeta.profile = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/StructureDefinition/emcareb20s2de06',
        tgt.code = create('CodeableConcept') as concept, 
            concept.system = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/CodeSystem/emcare-custom-codes',
            concept.code = 'EmCare.B20S2.DE06' 'set-code';  
    src.item as item where linkId  = 'timestamp', item.answer as a -> tgt.issued = a 'EmCare.A.DE08-main';       

    a  where a.value = 'yes' -> tgt.status = 'final' 'set-final';
    a  where a.value = 'no' -> tgt.status = 'cancelled' 'set-nofound'; 
    
}
    


group SetObservationemcareb21s2de01(source src, source a, target tgt, source oid ){

    oid ->  tgt.id = oid,
            tgt.identifier = create('Identifier') as CodeID, 
            CodeID.system = 'http://hl7.org/fhir/namingsystem-identifier-type',
            CodeID.use =  'official',
            CodeID.value = 'uuid',
            CodeID.id = oid
            'set-id';
    src -> 
        tgt.basedOn = src.basedOn,
        tgt.encounter = src.encounter,
        tgt. subject = src. subject,
        tgt.meta = create('Meta') as newMeta, newMeta.profile = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/StructureDefinition/emcareb21s2de01',
        tgt.status = 'final',
        tgt.code = create('CodeableConcept') as concept, 
            concept.system = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/CodeSystem/emcare-custom-codes',
            concept.code = 'EmCare.B21S2.DE01' 'set-code';  
    src.item as item where linkId  = 'timestamp', item.answer as a -> tgt.issued = a 'EmCare.A.DE08-main';       

    a -> tgt.value = a 'set-value'; 
}
    


group SetObservationemcareb21s2de05(source src, source a, target tgt, source oid ){

    oid ->  tgt.id = oid,
            tgt.identifier = create('Identifier') as CodeID, 
            CodeID.system = 'http://hl7.org/fhir/namingsystem-identifier-type',
            CodeID.use =  'official',
            CodeID.value = 'uuid',
            CodeID.id = oid
            'set-id';
    src -> 
        tgt.basedOn = src.basedOn,
        tgt.encounter = src.encounter,
        tgt. subject = src. subject,
        tgt.meta = create('Meta') as newMeta, newMeta.profile = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/StructureDefinition/emcareb21s2de05',
        tgt.status = 'final',
        tgt.code = create('CodeableConcept') as concept, 
            concept.system = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/CodeSystem/emcare-custom-codes',
            concept.code = 'EmCare.B21S2.DE05' 'set-code';  
    src.item as item where linkId  = 'timestamp', item.answer as a -> tgt.issued = a 'EmCare.A.DE08-main';       

    a -> tgt.value = a 'set-value'; 
}
    


group SetObservationemcareb21s2de08(source src, source a, target tgt, source oid ){
    oid ->  tgt.id = oid,
            tgt.identifier = create('Identifier') as CodeID, 
            CodeID.system = 'http://hl7.org/fhir/namingsystem-identifier-type',
            CodeID.use =  'official',
            CodeID.value = 'uuid',
            CodeID.id = oid
            'set-id';

    src -> tgt.basedOn = src.basedOn,
        tgt.encounter = src.encounter,
        tgt. subject = src. subject,
        tgt.meta = create('Meta') as newMeta, newMeta.profile = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/StructureDefinition/emcareb21s2de08',
        tgt.code = create('CodeableConcept') as concept, 
            concept.system = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/CodeSystem/emcare-custom-codes',
            concept.code = 'EmCare.B21S2.DE08' 'set-code';  
    src.item as item where linkId  = 'timestamp', item.answer as a -> tgt.issued = a 'EmCare.A.DE08-main';       

    a  where a.value = 'yes' -> tgt.status = 'final' 'set-final';
    a  where a.value = 'no' -> tgt.status = 'cancelled' 'set-nofound'; 
    
}
    


group SetObservationemcareb21s2de09(source src, source a, target tgt, source oid ){

    oid ->  tgt.id = oid,
            tgt.identifier = create('Identifier') as CodeID, 
            CodeID.system = 'http://hl7.org/fhir/namingsystem-identifier-type',
            CodeID.use =  'official',
            CodeID.value = 'uuid',
            CodeID.id = oid
            'set-id';
    src -> 
        tgt.basedOn = src.basedOn,
        tgt.encounter = src.encounter,
        tgt. subject = src. subject,
        tgt.meta = create('Meta') as newMeta, newMeta.profile = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/StructureDefinition/emcareb21s2de09',
        tgt.status = 'final',
        tgt.code = create('CodeableConcept') as concept, 
            concept.system = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/CodeSystem/emcare-custom-codes',
            concept.code = 'EmCare.B21S2.DE09' 'set-code';  
    src.item as item where linkId  = 'timestamp', item.answer as a -> tgt.issued = a 'EmCare.A.DE08-main';       

    a -> tgt.value = a 'set-value'; 
}
    


group SetObservationemcareb21s2de12(source src, source a, target tgt, source oid ){

    oid ->  tgt.id = oid,
            tgt.identifier = create('Identifier') as CodeID, 
            CodeID.system = 'http://hl7.org/fhir/namingsystem-identifier-type',
            CodeID.use =  'official',
            CodeID.value = 'uuid',
            CodeID.id = oid
            'set-id';
    src -> 
        tgt.basedOn = src.basedOn,
        tgt.encounter = src.encounter,
        tgt. subject = src. subject,
        tgt.meta = create('Meta') as newMeta, newMeta.profile = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/StructureDefinition/emcareb21s2de12',
        tgt.status = 'final',
        tgt.code = create('CodeableConcept') as concept, 
            concept.system = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/CodeSystem/emcare-custom-codes',
            concept.code = 'EmCare.B21S2.DE12' 'set-code';  
    src.item as item where linkId  = 'timestamp', item.answer as a -> tgt.issued = a 'EmCare.A.DE08-main';       

    a -> tgt.value = a 'set-value'; 
}
    


group SetObservationemcareb21s2de27(source src, source a, target tgt, source oid ){

    oid ->  tgt.id = oid,
            tgt.identifier = create('Identifier') as CodeID, 
            CodeID.system = 'http://hl7.org/fhir/namingsystem-identifier-type',
            CodeID.use =  'official',
            CodeID.value = 'uuid',
            CodeID.id = oid
            'set-id';
    src -> 
        tgt.basedOn = src.basedOn,
        tgt.encounter = src.encounter,
        tgt. subject = src. subject,
        tgt.meta = create('Meta') as newMeta, newMeta.profile = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/StructureDefinition/emcareb21s2de27',
        tgt.status = 'final',
        tgt.code = create('CodeableConcept') as concept, 
            concept.system = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/CodeSystem/emcare-custom-codes',
            concept.code = 'EmCare.B21S2.DE27' 'set-code';  
    src.item as item where linkId  = 'timestamp', item.answer as a -> tgt.issued = a 'EmCare.A.DE08-main';       

    a -> tgt.value = a 'set-value'; 
}
    


group SetObservationemcareb21s2de30(source src, source a, target tgt, source oid ){
    oid ->  tgt.id = oid,
            tgt.identifier = create('Identifier') as CodeID, 
            CodeID.system = 'http://hl7.org/fhir/namingsystem-identifier-type',
            CodeID.use =  'official',
            CodeID.value = 'uuid',
            CodeID.id = oid
            'set-id';

    src -> tgt.basedOn = src.basedOn,
        tgt.encounter = src.encounter,
        tgt. subject = src. subject,
        tgt.meta = create('Meta') as newMeta, newMeta.profile = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/StructureDefinition/emcareb21s2de30',
        tgt.code = create('CodeableConcept') as concept, 
            concept.system = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/CodeSystem/emcare-custom-codes',
            concept.code = 'EmCare.B21S2.DE30' 'set-code';  
    src.item as item where linkId  = 'timestamp', item.answer as a -> tgt.issued = a 'EmCare.A.DE08-main';       

    a  where a.value = 'yes' -> tgt.status = 'final' 'set-final';
    a  where a.value = 'no' -> tgt.status = 'cancelled' 'set-nofound'; 
    
}
    


group SetObservationemcareb21s2de31(source src, source a, target tgt, source oid ){
    oid ->  tgt.id = oid,
            tgt.identifier = create('Identifier') as CodeID, 
            CodeID.system = 'http://hl7.org/fhir/namingsystem-identifier-type',
            CodeID.use =  'official',
            CodeID.value = 'uuid',
            CodeID.id = oid
            'set-id';

    src -> tgt.basedOn = src.basedOn,
        tgt.encounter = src.encounter,
        tgt. subject = src. subject,
        tgt.meta = create('Meta') as newMeta, newMeta.profile = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/StructureDefinition/emcareb21s2de31',
        tgt.code = create('CodeableConcept') as concept, 
            concept.system = 'https://fhir.dk.swisstph-mis.ch/matchbox/fhir/CodeSystem/emcare-custom-codes',
            concept.code = 'EmCare.B21S2.DE31' 'set-code';  
    src.item as item where linkId  = 'timestamp', item.answer as a -> tgt.issued = a 'EmCare.A.DE08-main';       

    a  where a.value = 'yes' -> tgt.status = 'final' 'set-final';
    a  where a.value = 'no' -> tgt.status = 'cancelled' 'set-nofound'; 
    
}
    

