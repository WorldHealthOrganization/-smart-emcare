{
    "resourceType": "StructureMap",
    "id": "emcare-patient-EmCareA.Registration.P",
    "url": "https://fhir.dk.swisstph-mis.ch/matchbox/fhir//StructureMap/structuremap-emcare-patient-emcarea.registration.p",
    "name": "emcare-patient-EmCareA.Registration.P",
    "status": "draft",
    "structure": [
        {
            "url": "https://fhir.dk.swisstph-mis.ch/matchbox/fhir//Questionnaire/questionnaire-emcarea.registration.p",
            "mode": "source",
            "alias": "emcarea.registration.p"
        },
        {
            "url": "https://fhir.dk.swisstph-mis.ch/matchbox/fhir//Profile/profile-emcare-patient",
            "mode": "target",
            "alias": "emcare-patient"
        }
    ],
    "group": [
        {
            "name": "main",
            "typeMode": "types",
            "input": [
                {
                    "name": "qr",
                    "type": "emcarea.registration.p",
                    "mode": "source"
                },
                {
                    "name": "tgt",
                    "type": "emcare-patient",
                    "mode": "target"
                }
            ],
            "rule": [
                {
                    "name": "EmCare.A.DE01",
                    "source": [
                        {
                            "context": "item"
                        }
                    ],
                    "documentation": "item.answer first where item.linkId = 'EmCare.A.DE01' as a then { tgt.identifier as id then {  a -> id.type = '{{cs_url}}', id.value = a 'uid-1';}  'EmCare.A.DE01-1'; }"
                },
                {
                    "name": "EmCare.A.DE02",
                    "source": [
                        {
                            "context": "item"
                        }
                    ],
                    "documentation": "item.answer first where item.linkId = 'EmCare.A.DE02' as a then { tgt.identifier as id then {  a -> id.type = '{{cs_url}}', id.value = a 'uid-1';}  'EmCare.A.DE02-1'; }"
                },
                {
                    "name": "EmCare.A.DE03",
                    "source": [
                        {
                            "context": "item"
                        }
                    ],
                    "documentation": "item.answer first where item.linkId = 'EmCare.A.DE03' as a then { tgt.identifier as id then {  a -> id.type = '{{cs_url}}' 'noid';}  'EmCare.A.DE03-1'; }"
                },
                {
                    "name": "EmCare.A.DE04",
                    "source": [
                        {
                            "context": "item"
                        }
                    ],
                    "documentation": "item.answer first where item.linkId = 'EmCare.A.DE04' as a then { a -> tgt.name.given[0] = a 'EmCare.A.DE04-1'; }"
                },
                {
                    "name": "EmCare.A.DE05",
                    "source": [
                        {
                            "context": "item"
                        }
                    ],
                    "documentation": "item.answer first where item.linkId = 'EmCare.A.DE05' as a then { a -> tgt.name.given[1] = a 'EmCare.A.DE05-1'; }"
                },
                {
                    "name": "EmCare.A.DE06",
                    "source": [
                        {
                            "context": "item"
                        }
                    ],
                    "documentation": "item.answer first where item.linkId = 'EmCare.A.DE06' as a then { a -> tgt.name.family = a 'EmCare.A.DE06-1'; }"
                },
                {
                    "name": "EmCare.A.DE08",
                    "source": [
                        {
                            "context": "item"
                        }
                    ],
                    "documentation": "item.answer first where item.linkId = 'EmCare.A.DE08' as a then { a -> tgt.birthDate = a 'EmCare.A.DE08-1'; }"
                },
                {
                    "name": "EmCare.A.DE09",
                    "source": [
                        {
                            "context": "item"
                        }
                    ],
                    "documentation": "item.answer first where item.linkId = 'EmCare.A.DE09' as a then { a -> tgt.extension.birthTime = a 'EmCare.A.DE09-1'; }"
                },
                {
                    "name": "EmCare.A.DE12",
                    "source": [
                        {
                            "context": "item"
                        }
                    ],
                    "documentation": "item.answer first where item.linkId = 'EmCare.A.DE12' as a then { a -> tgt.extension.birthDateEstimator = a 'EmCare.A.DE12-1'; }"
                },
                {
                    "name": "EmCare.A.DE16",
                    "source": [
                        {
                            "context": "item"
                        }
                    ],
                    "documentation": "item.answer first where item.linkId = 'EmCare.A.DE16' as a then { a -> tgt.gender = translate(a, 'sex-of-the-client', 'http://hl7.org/fhir/administrative-gender') 'EmCare.A.DE16-1'; }"
                },
                {
                    "name": "EmCare.A.DE20",
                    "source": [
                        {
                            "context": "item"
                        }
                    ],
                    "documentation": "item.answer first where item.linkId = 'EmCare.A.DE20' as a then { a -> tgt.address.text = a 'EmCare.A.DE20-1'; }"
                },
                {
                    "name": "EmCare.A.DE47",
                    "source": [
                        {
                            "context": "item"
                        }
                    ],
                    "documentation": "item.answer first where item.linkId = 'EmCare.A.DE47' as a then { a -> tgt.contact.extension.caregiver = a 'EmCare.A.DE47-1'; }"
                },
                {
                    "name": "EmCare.A.DE31",
                    "source": [
                        {
                            "context": "item"
                        }
                    ],
                    "documentation": "item.answer first where item.linkId = 'EmCare.A.DE31' as a then { a -> tgt.extention.motherVitalStatus = a 'EmCare.A.DE31-1'; }"
                },
                {
                    "name": "EmCare.A.DE32",
                    "source": [
                        {
                            "context": "item"
                        }
                    ],
                    "documentation": "item.answer first where item.linkId = 'EmCare.A.DE32' as a then { a -> tgt.extention.fatherVitalStatus = a 'EmCare.A.DE32-1'; }"
                }
            ]
        }
    ]
}